import{r as f,C as K,o as Q,a as i,e as t,b as u,t as l,A as n,h,f as c,E as v,I as $,D as W,l as X,n as G,F as x,B as q,p as r}from"./vendor-kE9Pwckw.js";import{u as Z}from"./useGoals-CB1BPfKQ.js";import{f as p,a as E}from"./formatters-B8MMj10x.js";import{_ as tt}from"./index-C2foQiSO.js";import"./localStorageService-Bm_UUCrj.js";import"./utils-B9ygI19o.js";const ot={class:"goals"},st={class:"header"},et={class:"goals-summary"},nt={class:"summary-card"},lt={class:"amount"},at={class:"summary-card"},it={class:"amount"},rt={class:"summary-card"},dt={class:"progress-display"},ut={class:"amount"},ct={class:"progress-bar"},mt={class:"summary-card"},vt={class:"amount"},pt={key:0,class:"goal-form card"},bt={class:"form-row"},yt={class:"form-group"},_t={class:"form-group"},gt={class:"form-row"},ft={class:"form-group"},Ct={class:"form-group"},ht={class:"form-row"},At={class:"form-group"},kt={class:"form-group"},wt={class:"form-group"},Gt={class:"color-picker"},Dt={class:"form-group"},Mt={class:"form-actions"},St=["disabled"],Vt={key:1,class:"loading"},Tt={key:2,class:"error"},Ft={class:"tabs"},Ut={key:3,class:"goals-grid"},$t={class:"goal-header"},xt={class:"goal-info"},qt={class:"goal-category"},Et={class:"goal-actions"},Nt=["onClick"],Ot=["onClick"],It=["onClick"],Rt={class:"goal-progress"},Bt={class:"progress-info"},Lt={class:"progress-text"},Pt={class:"progress-percentage"},zt={class:"progress-bar"},Ht={class:"goal-details"},Yt={class:"detail-row"},jt={class:"value"},Jt={class:"detail-row"},Kt={class:"value"},Qt={class:"detail-row"},Wt={class:"value"},Xt={class:"detail-row"},Zt={class:"value"},to={key:0,class:"goal-description"},oo={key:4,class:"completed-goals"},so={class:"goal-header"},eo={class:"goal-info"},no={class:"goal-category"},lo={class:"goal-actions"},ao=["onClick"],io={class:"completion-info"},ro={class:"info-item"},uo={class:"value"},co={class:"info-item"},mo={class:"value"},vo={key:5,class:"empty-state"},po={key:6,class:"modal-overlay"},bo={class:"modal-content card"},yo={class:"form-group"},_o={class:"modal-actions"},go=["disabled"],fo={__name:"Goals",setup(Co){const{activeGoals:A,completedGoals:D,loading:b,error:M,fetchGoals:N,addGoal:O,updateGoal:I,deleteGoal:S,addContribution:R,totalTargetAmount:B,totalCurrentAmount:L,totalProgress:V}=Z(),d=f(!1),m=f(null),y=f("active"),k=f(!1),C=f(null),_=f(""),e=K({name:"",targetAmount:1e4,currentAmount:0,deadline:new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],category:"savings",color:"#4CAF50",priority:"medium",description:""});Q(()=>{N()});const P=async()=>{m.value?(await I(m.value.id,e),m.value=null):await O(e),T(),d.value=!1},z=a=>{m.value=a,e.name=a.name,e.targetAmount=a.targetAmount,e.currentAmount=a.currentAmount,e.deadline=a.deadline,e.category=a.category,e.color=a.color,e.priority=a.priority,e.description=a.description||"",d.value=!0},H=()=>{m.value=null,T(),d.value=!1},T=()=>{e.name="",e.targetAmount=1e4,e.currentAmount=0,e.deadline=new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],e.category="savings",e.color="#4CAF50",e.priority="medium",e.description=""},F=a=>{const o=new Date,g=new Date(a),s=Math.ceil((g-o)/(1e3*60*60*24));return Math.max(0,s)},Y=a=>{const o=F(a.deadline);if(o<=0)return 0;const g=a.targetAmount-a.currentAmount;return Math.max(0,g/o)},j=a=>{C.value=a,_.value="",k.value=!0},J=async()=>{if(!C.value||!_.value)return;const a=parseFloat(_.value);if(!(a<=0))try{await R(C.value.id,a),U()}catch(o){console.error("Error adding contribution:",o)}},U=()=>{k.value=!1,C.value=null,_.value=""};return(a,o)=>{var g;return r(),i("div",ot,[t("div",st,[o[13]||(o[13]=t("h1",null,"Metas Financeiras",-1)),t("button",{onClick:o[0]||(o[0]=s=>d.value=!d.value),class:"btn btn-primary"},l(d.value?"Cancelar":"+ Nova Meta"),1)]),t("div",et,[t("div",nt,[o[14]||(o[14]=t("h3",null,"Total Target",-1)),t("p",lt,l(n(p)(n(B))),1)]),t("div",at,[o[15]||(o[15]=t("h3",null,"Total Saved",-1)),t("p",it,l(n(p)(n(L))),1)]),t("div",rt,[o[16]||(o[16]=t("h3",null,"Overall Progress",-1)),t("div",dt,[t("p",ut,l(Math.round(n(V)*100))+"%",1),t("div",ct,[t("div",{class:"progress-fill",style:h({width:`${n(V)*100}%`})},null,4)])])]),t("div",mt,[o[17]||(o[17]=t("h3",null,"Active Goals",-1)),t("p",vt,l(n(A).length),1)])]),d.value?(r(),i("div",pt,[t("h3",null,l(m.value?"Edit Goal":"Create New Goal"),1),t("form",{onSubmit:X(P,["prevent"])},[t("div",bt,[t("div",yt,[o[18]||(o[18]=t("label",null,"Goal Name",-1)),c(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.name=s),type:"text",required:"",class:"form-control",placeholder:"e.g., Emergency Fund"},null,512),[[v,e.name]])]),t("div",_t,[o[20]||(o[20]=t("label",null,"Category",-1)),c(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.category=s),class:"form-control",required:""},[...o[19]||(o[19]=[W('<option value="savings" data-v-dd10626a>Savings</option><option value="vehicle" data-v-dd10626a>Vehicle</option><option value="travel" data-v-dd10626a>Travel</option><option value="home" data-v-dd10626a>Home</option><option value="education" data-v-dd10626a>Education</option><option value="investment" data-v-dd10626a>Investment</option><option value="other" data-v-dd10626a>Other</option>',7)])],512),[[$,e.category]])])]),t("div",gt,[t("div",ft,[o[21]||(o[21]=t("label",null,"Target Amount",-1)),c(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.targetAmount=s),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"10000"},null,512),[[v,e.targetAmount]])]),t("div",Ct,[o[22]||(o[22]=t("label",null,"Current Amount",-1)),c(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.currentAmount=s),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"0"},null,512),[[v,e.currentAmount]])])]),t("div",ht,[t("div",At,[o[23]||(o[23]=t("label",null,"Deadline",-1)),c(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.deadline=s),type:"date",required:"",class:"form-control"},null,512),[[v,e.deadline]])]),t("div",kt,[o[25]||(o[25]=t("label",null,"Priority",-1)),c(t("select",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.priority=s),class:"form-control",required:""},[...o[24]||(o[24]=[t("option",{value:"high"},"High",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"low"},"Low",-1)])],512),[[$,e.priority]])])]),t("div",wt,[o[26]||(o[26]=t("label",null,"Goal Color",-1)),t("div",Gt,[c(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>e.color=s),type:"color",class:"color-input"},null,512),[[v,e.color]]),t("span",{class:"color-preview",style:h({backgroundColor:e.color})},null,4),t("span",null,l(e.color),1)])]),t("div",Dt,[o[27]||(o[27]=t("label",null,"Description (Optional)",-1)),c(t("textarea",{"onUpdate:modelValue":o[8]||(o[8]=s=>e.description=s),class:"form-control",rows:"3",placeholder:"Add any notes about your goal..."},null,512),[[v,e.description]])]),t("div",Mt,[t("button",{type:"submit",disabled:n(b),class:"btn btn-primary"},l(n(b)?"Saving...":m.value?"Update Goal":"Create Goal"),9,St),m.value?(r(),i("button",{key:0,onClick:H,type:"button",class:"btn btn-secondary"}," Cancel ")):u("",!0)])],32)])):u("",!0),n(b)&&!d.value?(r(),i("div",Vt,"Loading goals...")):u("",!0),n(M)?(r(),i("div",Tt,l(n(M)),1)):u("",!0),t("div",Ft,[t("button",{onClick:o[9]||(o[9]=s=>y.value="active"),class:G(["tab-btn",{active:y.value==="active"}])}," Active Goals ("+l(n(A).length)+") ",3),t("button",{onClick:o[10]||(o[10]=s=>y.value="completed"),class:G(["tab-btn",{active:y.value==="completed"}])}," Completed Goals ("+l(n(D).length)+") ",3)]),y.value==="active"?(r(),i("div",Ut,[(r(!0),i(x,null,q(n(A),s=>(r(),i("div",{key:s.id,class:"goal-item card"},[t("div",$t,[t("div",{class:"goal-color",style:h({backgroundColor:s.color})},null,4),t("div",xt,[t("h3",null,l(s.name),1),t("span",qt,l(s.category),1),t("span",{class:G(["goal-priority",s.priority])},l(s.priority),3)]),t("div",Et,[t("button",{onClick:w=>z(s),class:"btn-icon",title:"Edit"}," ‚úèÔ∏è ",8,Nt),t("button",{onClick:w=>j(s),class:"btn-icon",title:"Add Contribution"}," üí∞ ",8,Ot),t("button",{onClick:w=>n(S)(s.id),class:"btn-icon",title:"Delete"}," üóëÔ∏è ",8,It)])]),t("div",Rt,[t("div",Bt,[t("span",Lt,l(n(p)(s.currentAmount))+" of "+l(n(p)(s.targetAmount)),1),t("span",Pt,l(Math.round(s.currentAmount/s.targetAmount*100))+"%",1)]),t("div",zt,[t("div",{class:"progress-fill",style:h({width:`${s.currentAmount/s.targetAmount*100}%`,backgroundColor:s.color})},null,4)])]),t("div",Ht,[t("div",Yt,[o[28]||(o[28]=t("span",{class:"label"},"Deadline:",-1)),t("span",jt,l(n(E)(s.deadline)),1)]),t("div",Jt,[o[29]||(o[29]=t("span",{class:"label"},"Days Remaining:",-1)),t("span",Kt,l(F(s.deadline))+" days",1)]),t("div",Qt,[o[30]||(o[30]=t("span",{class:"label"},"Remaining:",-1)),t("span",Wt,l(n(p)(s.targetAmount-s.currentAmount)),1)]),t("div",Xt,[o[31]||(o[31]=t("span",{class:"label"},"Daily Required:",-1)),t("span",Zt,l(n(p)(Y(s)))+"/day",1)])]),s.description?(r(),i("div",to,l(s.description),1)):u("",!0)]))),128))])):u("",!0),y.value==="completed"?(r(),i("div",oo,[(r(!0),i(x,null,q(n(D),s=>(r(),i("div",{key:s.id,class:"completed-goal card"},[o[34]||(o[34]=t("div",{class:"completion-badge"},"üéâ Completed!",-1)),t("div",so,[t("div",{class:"goal-color",style:h({backgroundColor:s.color})},null,4),t("div",eo,[t("h3",null,l(s.name),1),t("span",no,l(s.category),1)]),t("div",lo,[t("button",{onClick:w=>n(S)(s.id),class:"btn-icon",title:"Delete"}," üóëÔ∏è ",8,ao)])]),t("div",io,[t("div",ro,[o[32]||(o[32]=t("span",{class:"label"},"Completed On:",-1)),t("span",uo,l(n(E)(new Date().toISOString())),1)]),t("div",co,[o[33]||(o[33]=t("span",{class:"label"},"Total Saved:",-1)),t("span",mo,l(n(p)(s.targetAmount)),1)])])]))),128))])):u("",!0),n(A).length===0&&!n(b)?(r(),i("div",vo,[o[35]||(o[35]=t("div",{class:"empty-icon"},"üéØ",-1)),o[36]||(o[36]=t("h3",null,"No Financial Goals Yet",-1)),o[37]||(o[37]=t("p",null,"Start by creating your first financial goal",-1)),t("button",{onClick:o[11]||(o[11]=s=>d.value=!0),class:"btn btn-primary"}," Create First Goal ")])):u("",!0),k.value?(r(),i("div",po,[t("div",bo,[t("h3",null,"Add Contribution to "+l((g=C.value)==null?void 0:g.name),1),t("div",yo,[o[38]||(o[38]=t("label",null,"Amount",-1)),c(t("input",{"onUpdate:modelValue":o[12]||(o[12]=s=>_.value=s),type:"number",step:"0.01",class:"form-control",placeholder:"100"},null,512),[[v,_.value]])]),t("div",_o,[t("button",{onClick:J,class:"btn btn-primary",disabled:n(b)},l(n(b)?"Adicionando...":"Adicionar Contribui√ß√£o"),9,go),t("button",{onClick:U,class:"btn btn-secondary"}," Cancelar ")])])])):u("",!0)])}}},Mo=tt(fo,[["__scopeId","data-v-dd10626a"]]);export{Mo as default};
