import{d as Z,r as D,c as T,B as tt,o as ot,a as y,e as t,b as h,t as i,z as n,h as E,f as C,E as S,I as L,C as et,D as st,n as B,F as z,A as H,m as f}from"./vendor-BNDw7TD6.js";import{l as G}from"./localStorageService-Bm_UUCrj.js";import{f as M,a as Y}from"./formatters-B8MMj10x.js";import{_ as at}from"./index-Cwx_woFl.js";import"./utils-B9ygI19o.js";const nt=Z("goal",()=>{const d=D([]);return{goals:d,setGoals:c=>{d.value=c},addGoal:c=>{d.value.push(c)},deleteGoal:c=>{d.value=d.value.filter(p=>p.id!==c)},updateGoal:(c,p)=>{const g=d.value.findIndex(k=>k.id===c);g!==-1&&(d.value[g]={...d.value[g],...p})},addContribution:(c,p)=>{const g=d.value.find(k=>k.id===c);g&&(g.currentAmount+=p,g.currentAmount>g.targetAmount&&(g.currentAmount=g.targetAmount))},getGoalById:c=>d.value.find(p=>p.id===c),getGoalsByPriority:c=>d.value.filter(p=>p.priority===c)}}),w="goals",lt=()=>{const d=nt(),m=D(!1),b=D(null),_=async()=>{m.value=!0,b.value=null;try{const a=G.getData(w)||[];d.setGoals(a)}catch{b.value="Failed to fetch goals"}finally{m.value=!1}},V=async a=>{m.value=!0;try{const l={...a,id:Date.now(),currentAmount:0},v=[...G.getData(w)||[],l];G.saveData(w,v),d.addGoal(l)}catch(l){throw b.value="Failed to add goal",l}finally{m.value=!1}},I=async(a,l)=>{m.value=!0;try{let r=G.getData(w)||[];const v=r.findIndex(A=>A.id===a);v!==-1&&(r[v]={...r[v],...l},G.saveData(w,r),d.updateGoal(a,l))}catch(r){throw b.value="Failed to update goal",r}finally{m.value=!1}},U=async a=>{m.value=!0;try{const r=(G.getData(w)||[]).filter(v=>v.id!==a);G.saveData(w,r),d.deleteGoal(a)}catch(l){throw b.value="Failed to delete goal",l}finally{m.value=!1}},$=async(a,l)=>{m.value=!0;try{let r=G.getData(w)||[];const v=r.findIndex(A=>A.id===a);v!==-1&&(r[v].currentAmount+=l,r[v].currentAmount>r[v].targetAmount&&(r[v].currentAmount=r[v].targetAmount),G.saveData(w,r),d.addContribution(a,l))}catch(r){throw b.value="Failed to add contribution",r}finally{m.value=!1}},c=T(()=>d.goals.reduce((a,l)=>a+l.targetAmount,0)),p=T(()=>d.goals.reduce((a,l)=>a+l.currentAmount,0)),g=T(()=>c.value>0?p.value/c.value:0),k=T(()=>d.goals.filter(a=>{const l=new Date(a.deadline);return a.currentAmount<a.targetAmount&&l>new Date})),O=T(()=>d.goals.filter(a=>a.currentAmount>=a.targetAmount));return{goals:T(()=>d.goals),activeGoals:k,completedGoals:O,loading:m,error:b,fetchGoals:_,addGoal:V,updateGoal:I,deleteGoal:U,addContribution:$,totalTargetAmount:c,totalCurrentAmount:p,totalProgress:g}},it={class:"goals"},rt={class:"header"},dt={class:"goals-summary"},ut={class:"summary-card"},ct={class:"amount"},vt={class:"summary-card"},mt={class:"amount"},pt={class:"summary-card"},gt={class:"progress-display"},yt={class:"amount"},ft={class:"progress-bar"},bt={class:"summary-card"},_t={class:"amount"},At={key:0,class:"goal-form card"},ht={class:"form-row"},Ct={class:"form-group"},Gt={class:"form-group"},wt={class:"form-row"},Dt={class:"form-group"},kt={class:"form-group"},St={class:"form-row"},Mt={class:"form-group"},Ft={class:"form-group"},xt={class:"form-group"},Tt={class:"color-picker"},Vt={class:"form-group"},Et={class:"form-actions"},It=["disabled"],Ut={key:1,class:"loading"},$t={key:2,class:"error"},Ot={class:"tabs"},qt={key:3,class:"goals-grid"},Bt={class:"goal-header"},Nt={class:"goal-info"},Rt={class:"goal-category"},Pt={class:"goal-actions"},Lt=["onClick"],zt=["onClick"],Ht=["onClick"],Yt={class:"goal-progress"},Kt={class:"progress-info"},jt={class:"progress-text"},Jt={class:"progress-percentage"},Qt={class:"progress-bar"},Wt={class:"goal-details"},Xt={class:"detail-row"},Zt={class:"value"},to={class:"detail-row"},oo={class:"value"},eo={class:"detail-row"},so={class:"value"},ao={class:"detail-row"},no={class:"value"},lo={key:0,class:"goal-description"},io={key:4,class:"completed-goals"},ro={class:"goal-header"},uo={class:"goal-info"},co={class:"goal-category"},vo={class:"goal-actions"},mo=["onClick"],po={class:"completion-info"},go={class:"info-item"},yo={class:"value"},fo={class:"info-item"},bo={class:"value"},_o={key:5,class:"empty-state"},Ao={key:6,class:"modal-overlay"},ho={class:"modal-content card"},Co={class:"form-group"},Go={class:"modal-actions"},wo=["disabled"],Do={__name:"Goals",setup(d){const{activeGoals:m,completedGoals:b,loading:_,error:V,fetchGoals:I,addGoal:U,updateGoal:$,deleteGoal:c,addContribution:p,totalTargetAmount:g,totalCurrentAmount:k,totalProgress:O}=lt(),a=D(!1),l=D(null),r=D("active"),v=D(!1),A=D(null),F=D(""),s=tt({name:"",targetAmount:1e4,currentAmount:0,deadline:new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],category:"savings",color:"#4CAF50",priority:"medium",description:""});ot(()=>{I()});const K=async()=>{l.value?(await $(l.value.id,s),l.value=null):await U(s),N(),a.value=!1},j=u=>{l.value=u,s.name=u.name,s.targetAmount=u.targetAmount,s.currentAmount=u.currentAmount,s.deadline=u.deadline,s.category=u.category,s.color=u.color,s.priority=u.priority,s.description=u.description||"",a.value=!0},J=()=>{l.value=null,N(),a.value=!1},N=()=>{s.name="",s.targetAmount=1e4,s.currentAmount=0,s.deadline=new Date(new Date().setMonth(new Date().getMonth()+6)).toISOString().split("T")[0],s.category="savings",s.color="#4CAF50",s.priority="medium",s.description=""},R=u=>{const o=new Date,x=new Date(u),e=Math.ceil((x-o)/(1e3*60*60*24));return Math.max(0,e)},Q=u=>{const o=R(u.deadline);if(o<=0)return 0;const x=u.targetAmount-u.currentAmount;return Math.max(0,x/o)},W=u=>{A.value=u,F.value="",v.value=!0},X=async()=>{if(!A.value||!F.value)return;const u=parseFloat(F.value);if(!(u<=0))try{await p(A.value.id,u),P()}catch(o){console.error("Error adding contribution:",o)}},P=()=>{v.value=!1,A.value=null,F.value=""};return(u,o)=>{var x;return f(),y("div",it,[t("div",rt,[o[13]||(o[13]=t("h1",null,"Metas Financeiras",-1)),t("button",{onClick:o[0]||(o[0]=e=>a.value=!a.value),class:"btn btn-primary"},i(a.value?"Cancelar":"+ Nova Meta"),1)]),t("div",dt,[t("div",ut,[o[14]||(o[14]=t("h3",null,"Total Target",-1)),t("p",ct,i(n(M)(n(g))),1)]),t("div",vt,[o[15]||(o[15]=t("h3",null,"Total Saved",-1)),t("p",mt,i(n(M)(n(k))),1)]),t("div",pt,[o[16]||(o[16]=t("h3",null,"Overall Progress",-1)),t("div",gt,[t("p",yt,i(Math.round(n(O)*100))+"%",1),t("div",ft,[t("div",{class:"progress-fill",style:E({width:`${n(O)*100}%`})},null,4)])])]),t("div",bt,[o[17]||(o[17]=t("h3",null,"Active Goals",-1)),t("p",_t,i(n(m).length),1)])]),a.value?(f(),y("div",At,[t("h3",null,i(l.value?"Edit Goal":"Create New Goal"),1),t("form",{onSubmit:st(K,["prevent"])},[t("div",ht,[t("div",Ct,[o[18]||(o[18]=t("label",null,"Goal Name",-1)),C(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.name=e),type:"text",required:"",class:"form-control",placeholder:"e.g., Emergency Fund"},null,512),[[S,s.name]])]),t("div",Gt,[o[20]||(o[20]=t("label",null,"Category",-1)),C(t("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>s.category=e),class:"form-control",required:""},[...o[19]||(o[19]=[et('<option value="savings" data-v-dd10626a>Savings</option><option value="vehicle" data-v-dd10626a>Vehicle</option><option value="travel" data-v-dd10626a>Travel</option><option value="home" data-v-dd10626a>Home</option><option value="education" data-v-dd10626a>Education</option><option value="investment" data-v-dd10626a>Investment</option><option value="other" data-v-dd10626a>Other</option>',7)])],512),[[L,s.category]])])]),t("div",wt,[t("div",Dt,[o[21]||(o[21]=t("label",null,"Target Amount",-1)),C(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.targetAmount=e),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"10000"},null,512),[[S,s.targetAmount]])]),t("div",kt,[o[22]||(o[22]=t("label",null,"Current Amount",-1)),C(t("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.currentAmount=e),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"0"},null,512),[[S,s.currentAmount]])])]),t("div",St,[t("div",Mt,[o[23]||(o[23]=t("label",null,"Deadline",-1)),C(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.deadline=e),type:"date",required:"",class:"form-control"},null,512),[[S,s.deadline]])]),t("div",Ft,[o[25]||(o[25]=t("label",null,"Priority",-1)),C(t("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.priority=e),class:"form-control",required:""},[...o[24]||(o[24]=[t("option",{value:"high"},"High",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"low"},"Low",-1)])],512),[[L,s.priority]])])]),t("div",xt,[o[26]||(o[26]=t("label",null,"Goal Color",-1)),t("div",Tt,[C(t("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>s.color=e),type:"color",class:"color-input"},null,512),[[S,s.color]]),t("span",{class:"color-preview",style:E({backgroundColor:s.color})},null,4),t("span",null,i(s.color),1)])]),t("div",Vt,[o[27]||(o[27]=t("label",null,"Description (Optional)",-1)),C(t("textarea",{"onUpdate:modelValue":o[8]||(o[8]=e=>s.description=e),class:"form-control",rows:"3",placeholder:"Add any notes about your goal..."},null,512),[[S,s.description]])]),t("div",Et,[t("button",{type:"submit",disabled:n(_),class:"btn btn-primary"},i(n(_)?"Saving...":l.value?"Update Goal":"Create Goal"),9,It),l.value?(f(),y("button",{key:0,onClick:J,type:"button",class:"btn btn-secondary"}," Cancel ")):h("",!0)])],32)])):h("",!0),n(_)&&!a.value?(f(),y("div",Ut,"Loading goals...")):h("",!0),n(V)?(f(),y("div",$t,i(n(V)),1)):h("",!0),t("div",Ot,[t("button",{onClick:o[9]||(o[9]=e=>r.value="active"),class:B(["tab-btn",{active:r.value==="active"}])}," Active Goals ("+i(n(m).length)+") ",3),t("button",{onClick:o[10]||(o[10]=e=>r.value="completed"),class:B(["tab-btn",{active:r.value==="completed"}])}," Completed Goals ("+i(n(b).length)+") ",3)]),r.value==="active"?(f(),y("div",qt,[(f(!0),y(z,null,H(n(m),e=>(f(),y("div",{key:e.id,class:"goal-item card"},[t("div",Bt,[t("div",{class:"goal-color",style:E({backgroundColor:e.color})},null,4),t("div",Nt,[t("h3",null,i(e.name),1),t("span",Rt,i(e.category),1),t("span",{class:B(["goal-priority",e.priority])},i(e.priority),3)]),t("div",Pt,[t("button",{onClick:q=>j(e),class:"btn-icon",title:"Edit"}," ‚úèÔ∏è ",8,Lt),t("button",{onClick:q=>W(e),class:"btn-icon",title:"Add Contribution"}," üí∞ ",8,zt),t("button",{onClick:q=>n(c)(e.id),class:"btn-icon",title:"Delete"}," üóëÔ∏è ",8,Ht)])]),t("div",Yt,[t("div",Kt,[t("span",jt,i(n(M)(e.currentAmount))+" of "+i(n(M)(e.targetAmount)),1),t("span",Jt,i(Math.round(e.currentAmount/e.targetAmount*100))+"%",1)]),t("div",Qt,[t("div",{class:"progress-fill",style:E({width:`${e.currentAmount/e.targetAmount*100}%`,backgroundColor:e.color})},null,4)])]),t("div",Wt,[t("div",Xt,[o[28]||(o[28]=t("span",{class:"label"},"Deadline:",-1)),t("span",Zt,i(n(Y)(e.deadline)),1)]),t("div",to,[o[29]||(o[29]=t("span",{class:"label"},"Days Remaining:",-1)),t("span",oo,i(R(e.deadline))+" days",1)]),t("div",eo,[o[30]||(o[30]=t("span",{class:"label"},"Remaining:",-1)),t("span",so,i(n(M)(e.targetAmount-e.currentAmount)),1)]),t("div",ao,[o[31]||(o[31]=t("span",{class:"label"},"Daily Required:",-1)),t("span",no,i(n(M)(Q(e)))+"/day",1)])]),e.description?(f(),y("div",lo,i(e.description),1)):h("",!0)]))),128))])):h("",!0),r.value==="completed"?(f(),y("div",io,[(f(!0),y(z,null,H(n(b),e=>(f(),y("div",{key:e.id,class:"completed-goal card"},[o[34]||(o[34]=t("div",{class:"completion-badge"},"üéâ Completed!",-1)),t("div",ro,[t("div",{class:"goal-color",style:E({backgroundColor:e.color})},null,4),t("div",uo,[t("h3",null,i(e.name),1),t("span",co,i(e.category),1)]),t("div",vo,[t("button",{onClick:q=>n(c)(e.id),class:"btn-icon",title:"Delete"}," üóëÔ∏è ",8,mo)])]),t("div",po,[t("div",go,[o[32]||(o[32]=t("span",{class:"label"},"Completed On:",-1)),t("span",yo,i(n(Y)(new Date().toISOString())),1)]),t("div",fo,[o[33]||(o[33]=t("span",{class:"label"},"Total Saved:",-1)),t("span",bo,i(n(M)(e.targetAmount)),1)])])]))),128))])):h("",!0),n(m).length===0&&!n(_)?(f(),y("div",_o,[o[35]||(o[35]=t("div",{class:"empty-icon"},"üéØ",-1)),o[36]||(o[36]=t("h3",null,"No Financial Goals Yet",-1)),o[37]||(o[37]=t("p",null,"Start by creating your first financial goal",-1)),t("button",{onClick:o[11]||(o[11]=e=>a.value=!0),class:"btn btn-primary"}," Create First Goal ")])):h("",!0),v.value?(f(),y("div",Ao,[t("div",ho,[t("h3",null,"Add Contribution to "+i((x=A.value)==null?void 0:x.name),1),t("div",Co,[o[38]||(o[38]=t("label",null,"Amount",-1)),C(t("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>F.value=e),type:"number",step:"0.01",class:"form-control",placeholder:"100"},null,512),[[S,F.value]])]),t("div",Go,[t("button",{onClick:X,class:"btn btn-primary",disabled:n(_)},i(n(_)?"Adicionando...":"Adicionar Contribui√ß√£o"),9,wo),t("button",{onClick:P,class:"btn btn-secondary"}," Cancelar ")])])])):h("",!0)])}}},To=at(Do,[["__scopeId","data-v-dd10626a"]]);export{To as default};
