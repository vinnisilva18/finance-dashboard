import{d as m,r as f,c as v}from"./vendor-kE9Pwckw.js";import{l as o}from"./localStorageService-Bm_UUCrj.js";const S=m("card",()=>{const a=f([]);return{cards:a,setCards:r=>{a.value=r},addCard:r=>{a.value.unshift(r)},deleteCard:r=>{a.value=a.value.filter(s=>s.id!==r)},updateCard:(r,s)=>{const n=a.value.findIndex(C=>C.id===r);n!==-1&&(a.value[n]={...a.value[n],...s})},getCardById:r=>a.value.find(s=>s.id===r)}}),i="cards",F=()=>{const a=S(),d=f(!1),l=f(null),y=async()=>{d.value=!0,l.value=null;try{const e=o.getData(i)||[];a.setCards(e)}catch{l.value="Failed to fetch credit cards"}finally{d.value=!1}},h=async e=>{d.value=!0;try{const t={...e,id:Date.now(),number:`**** **** **** ${e.lastFourDigits}`},u=[...o.getData(i)||[],t];o.saveData(i,u),a.addCard(t)}catch(t){throw l.value="Failed to add credit card",t}finally{d.value=!1}},p=async(e,t)=>{d.value=!0;try{let c=o.getData(i)||[];const u=c.findIndex(g=>g.id===e);u!==-1&&(c[u]={...c[u],...t},o.saveData(i,c),a.updateCard(e,t))}catch(c){throw l.value="Failed to update credit card",c}finally{d.value=!1}},r=async e=>{d.value=!0;try{const c=(o.getData(i)||[]).filter(u=>u.id!==e);o.saveData(i,c),a.deleteCard(e)}catch(t){throw l.value="Failed to delete credit card",t}finally{d.value=!1}},s=v(()=>a.cards.reduce((e,t)=>e+t.limit,0)),n=v(()=>a.cards.reduce((e,t)=>e+t.balance,0)),C=v(()=>s.value-n.value),D=v(()=>s.value>0?n.value/s.value:0);return{cards:v(()=>a.cards),loading:d,error:l,fetchCards:y,addCard:h,updateCard:p,deleteCard:r,totalCreditLimit:s,totalBalance:n,availableCredit:C,utilizationRate:D}};export{F as u};
