import{d as j,r as V,c as M,B as G,o as K,a as C,e as t,b as _,t as d,z as l,n as E,f as g,E as x,I as Y,h as T,D as H,F as J,A as Q,m as f}from"./vendor-BNDw7TD6.js";import{l as D}from"./localStorageService-Bm_UUCrj.js";import{f as w,a as W}from"./formatters-B8MMj10x.js";import{_ as X}from"./index-Cwx_woFl.js";import"./utils-B9ygI19o.js";const Z=j("card",()=>{const i=V([]);return{cards:i,setCards:m=>{i.value=m},addCard:m=>{i.value.unshift(m)},deleteCard:m=>{i.value=i.value.filter(p=>p.id!==m)},updateCard:(m,p)=>{const b=i.value.findIndex(F=>F.id===m);b!==-1&&(i.value[b]={...i.value[b],...p})},getCardById:m=>i.value.find(p=>p.id===m)}}),h="cards",tt=()=>{const i=Z(),c=V(!1),v=V(null),k=async()=>{c.value=!0,v.value=null;try{const r=D.getData(h)||[];i.setCards(r)}catch{v.value="Failed to fetch credit cards"}finally{c.value=!1}},A=async r=>{c.value=!0;try{const o={...r,id:Date.now(),number:`**** **** **** ${r.lastFourDigits}`},y=[...D.getData(h)||[],o];D.saveData(h,y),i.addCard(o)}catch(o){throw v.value="Failed to add credit card",o}finally{c.value=!1}},I=async(r,o)=>{c.value=!0;try{let n=D.getData(h)||[];const y=n.findIndex(s=>s.id===r);y!==-1&&(n[y]={...n[y],...o},D.saveData(h,n),i.updateCard(r,o))}catch(n){throw v.value="Failed to update credit card",n}finally{c.value=!1}},m=async r=>{c.value=!0;try{const n=(D.getData(h)||[]).filter(y=>y.id!==r);D.saveData(h,n),i.deleteCard(r)}catch(o){throw v.value="Failed to delete credit card",o}finally{c.value=!1}},p=M(()=>i.cards.reduce((r,o)=>r+o.limit,0)),b=M(()=>i.cards.reduce((r,o)=>r+o.balance,0)),F=M(()=>p.value-b.value),U=M(()=>p.value>0?b.value/p.value:0);return{cards:M(()=>i.cards),loading:c,error:v,fetchCards:k,addCard:A,updateCard:I,deleteCard:m,totalCreditLimit:p,totalBalance:b,availableCredit:F,utilizationRate:U}},et={class:"credit-cards"},at={class:"header"},st={class:"summary-cards"},ot={class:"summary-card"},lt={class:"amount"},it={class:"summary-card"},rt={class:"amount"},nt={class:"summary-card"},dt={class:"amount positive"},ut={class:"summary-card"},ct={key:0,class:"card-form card"},mt={class:"form-row"},vt={class:"form-group"},pt={class:"form-group"},Ct={class:"form-row"},ft={class:"form-group"},yt={class:"form-group"},bt={class:"form-row"},_t={class:"form-group"},gt={class:"form-group"},Dt={class:"form-group"},ht={class:"color-picker"},xt={class:"form-actions"},wt=["disabled"],kt={key:1,class:"loading"},Ft={key:2,class:"error"},St={class:"cards-grid"},Mt={class:"card-header"},Vt={class:"card-type"},At={key:0,class:"card-logo visa"},It={key:1,class:"card-logo mastercard"},Ut={key:2,class:"card-logo amex"},zt={key:3,class:"card-logo discover"},Et={class:"card-actions"},Tt=["onClick"],$t=["onClick"],Bt={class:"card-number"},qt={class:"card-footer"},Lt={class:"card-info"},Nt={class:"card-name"},Ot={class:"card-due"},Pt={class:"card-balance"},Rt={class:"card-details"},jt={class:"detail-row"},Gt={class:"value"},Kt={class:"detail-row"},Yt={class:"value positive"},Ht={class:"detail-row"},Jt={class:"detail-row"},Qt={class:"value"},Wt={key:3,class:"empty-state"},Xt={__name:"CreditCards",setup(i){const{cards:c,loading:v,error:k,fetchCards:A,addCard:I,updateCard:m,deleteCard:p,totalCreditLimit:b,totalBalance:F,availableCredit:U,utilizationRate:r}=tt(),o=V(!1),n=V(null),y={name:"",type:"visa",lastFourDigits:"",limit:1e4,balance:0,dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],color:"#1a237e"},s=G({...y});K(()=>{A()});const $=(u,e)=>{const a=parseInt(u.slice(1),16),S=Math.max(0,Math.min(255,(a>>16)+e)),P=Math.max(0,Math.min(255,(a>>8&255)+e)),R=Math.max(0,Math.min(255,(a&255)+e));return`#${((1<<24)+(S<<16)+(P<<8)+R).toString(16).slice(1)}`},B=async()=>{n.value?await m(n.value.id,{...s,number:`**** **** **** ${s.lastFourDigits}`}):await I(s),z(),o.value=!1,n.value=null},q=u=>{n.value=u,s.name=u.name,s.type=u.type,s.lastFourDigits=u.number.slice(-4),s.limit=u.limit,s.balance=u.balance,s.dueDate=u.dueDate,s.color=u.color,o.value=!0},L=()=>{n.value=null,z(),o.value=!1},z=()=>{Object.assign(s,y),s.dueDate=new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]},N=async u=>{confirm("Tem certeza que deseja excluir este cart√£o de cr√©dito?")&&await p(u)},O=u=>{const e=new Date,a=new Date(u),S=Math.ceil((a-e)/(1e3*60*60*24));return Math.max(0,S)};return(u,e)=>(f(),C("div",et,[t("div",at,[e[9]||(e[9]=t("h1",null,"Cart√µes de Cr√©dito",-1)),t("button",{onClick:e[0]||(e[0]=a=>o.value=!o.value),class:"btn btn-primary"},d(o.value?"Cancelar":"+ Adicionar Cart√£o"),1)]),t("div",st,[t("div",ot,[e[10]||(e[10]=t("h3",null,"Limite de Cr√©dito Total",-1)),t("p",lt,d(l(w)(l(b))),1)]),t("div",it,[e[11]||(e[11]=t("h3",null,"Saldo Total",-1)),t("p",rt,d(l(w)(l(F))),1)]),t("div",nt,[e[12]||(e[12]=t("h3",null,"Cr√©dito Dispon√≠vel",-1)),t("p",dt,d(l(w)(l(U))),1)]),t("div",ut,[e[13]||(e[13]=t("h3",null,"Taxa de Utiliza√ß√£o",-1)),t("p",{class:E(["amount",l(r)>.3?"negative":"positive"])},d((l(r)*100).toFixed(1))+"% ",3)])]),o.value?(f(),C("div",ct,[t("h3",null,d(n.value?"Editar Cart√£o de Cr√©dito":"Adicionar Novo Cart√£o de Cr√©dito"),1),t("form",{onSubmit:H(B,["prevent"])},[t("div",mt,[t("div",vt,[e[14]||(e[14]=t("label",null,"Nome do Cart√£o",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.name=a),type:"text",required:"",class:"form-control",placeholder:"ex: Visa Platinum"},null,512),[[x,s.name]])]),t("div",pt,[e[16]||(e[16]=t("label",null,"Tipo de Cart√£o",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.type=a),class:"form-control",required:""},[...e[15]||(e[15]=[t("option",{value:"visa"},"Visa",-1),t("option",{value:"mastercard"},"MasterCard",-1),t("option",{value:"amex"},"American Express",-1),t("option",{value:"discover"},"Discover",-1)])],512),[[Y,s.type]])])]),t("div",Ct,[t("div",ft,[e[17]||(e[17]=t("label",null,"√öltimos 4 D√≠gitos",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.lastFourDigits=a),type:"text",maxlength:"4",required:"",class:"form-control",placeholder:"1234"},null,512),[[x,s.lastFourDigits]])]),t("div",yt,[e[18]||(e[18]=t("label",null,"Limite de Cr√©dito",-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.limit=a),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"10000"},null,512),[[x,s.limit,void 0,{number:!0}]])])]),t("div",bt,[t("div",_t,[e[19]||(e[19]=t("label",null,"Saldo Atual",-1)),g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.balance=a),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"4500"},null,512),[[x,s.balance,void 0,{number:!0}]])]),t("div",gt,[e[20]||(e[20]=t("label",null,"Data de Vencimento",-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.dueDate=a),type:"date",required:"",class:"form-control"},null,512),[[x,s.dueDate]])])]),t("div",Dt,[e[21]||(e[21]=t("label",null,"Cor do Cart√£o",-1)),t("div",ht,[g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.color=a),type:"color",class:"color-input"},null,512),[[x,s.color]]),t("span",{class:"color-preview",style:T({backgroundColor:s.color})},null,4),t("span",null,d(s.color),1)])]),t("div",xt,[t("button",{type:"submit",disabled:l(v),class:"btn btn-primary"},d(l(v)?"Salvando...":n.value?"Atualizar Cart√£o":"Adicionar Cart√£o"),9,wt),n.value?(f(),C("button",{key:0,onClick:L,type:"button",class:"btn btn-secondary"}," Cancelar ")):_("",!0)])],32)])):_("",!0),l(v)&&!o.value?(f(),C("div",kt,"Carregando cart√µes de cr√©dito...")):_("",!0),l(k)?(f(),C("div",Ft,d(l(k)),1)):_("",!0),t("div",St,[(f(!0),C(J,null,Q(l(c),a=>(f(),C("div",{key:a.id,class:"credit-card-item"},[t("div",{class:"card-front",style:T({background:`linear-gradient(135deg, ${a.color}, ${$(a.color,-20)})`})},[t("div",Mt,[t("div",Vt,[a.type==="visa"?(f(),C("span",At,"VISA")):_("",!0),a.type==="mastercard"?(f(),C("span",It,"MasterCard")):_("",!0),a.type==="amex"?(f(),C("span",Ut,"Amex")):_("",!0),a.type==="discover"?(f(),C("span",zt,"Discover")):_("",!0)]),t("div",Et,[t("button",{onClick:S=>q(a),class:"btn-icon",title:"Editar"}," ‚úèÔ∏è ",8,Tt),t("button",{onClick:S=>N(a.id),class:"btn-icon",title:"Excluir"}," üóëÔ∏è ",8,$t)])]),t("div",Bt,d(a.number),1),t("div",qt,[t("div",Lt,[t("div",Nt,d(a.name),1),t("div",Ot,"Vencimento: "+d(l(W)(a.dueDate)),1)]),t("div",Pt,d(l(w)(a.balance)),1)])],4),t("div",Rt,[t("div",jt,[e[22]||(e[22]=t("span",{class:"label"},"Limite de Cr√©dito:",-1)),t("span",Gt,d(l(w)(a.limit)),1)]),t("div",Kt,[e[23]||(e[23]=t("span",{class:"label"},"Dispon√≠vel:",-1)),t("span",Yt,d(l(w)(a.limit-a.balance)),1)]),t("div",Ht,[e[24]||(e[24]=t("span",{class:"label"},"Utiliza√ß√£o:",-1)),t("span",{class:E(["value",a.balance/a.limit>.3?"negative":""])},d((a.balance/a.limit*100).toFixed(1))+"% ",3)]),t("div",Jt,[e[25]||(e[25]=t("span",{class:"label"},"Pr√≥ximo Pagamento:",-1)),t("span",Qt,d(O(a.dueDate))+" dias",1)])])]))),128))]),l(c).length===0&&!l(v)?(f(),C("div",Wt,[e[26]||(e[26]=t("div",{class:"empty-icon"},"üí≥",-1)),e[27]||(e[27]=t("h3",null,"Nenhum Cart√£o de Cr√©dito",-1)),e[28]||(e[28]=t("p",null,"Adicione seu primeiro cart√£o de cr√©dito para come√ßar",-1)),t("button",{onClick:e[8]||(e[8]=a=>o.value=!0),class:"btn btn-primary"}," Adicionar Primeiro Cart√£o ")])):_("",!0)]))}},oe=X(Xt,[["__scopeId","data-v-9524d612"]]);export{oe as default};
