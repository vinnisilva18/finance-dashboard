import{c as O,a as l,m as d,e as t,h as D,t as o,n as G,z as n,r as _,o as H,w as Q,g as S,b as L,i as m,j as f,k as W,F,A as V,l as X}from"./vendor-LfCTP-hD.js";import{f as w,a as U}from"./formatters-B8MMj10x.js";import{_ as J}from"./index-t8Iq_7gf.js";import{l as E}from"./localStorageService-Bm_UUCrj.js";import{C as Z,B as tt,a as st,b as et,L as at,p as ot,c as nt}from"./charts-BaeV1Cpd.js";const rt={class:"card-header"},it={class:"card-content"},ct={class:"card-title"},lt={class:"card-value"},dt={class:"card-footer"},ut={class:"progress-container"},mt={class:"progress-bar"},pt={class:"progress-text"},vt={__name:"StatsCard",props:{title:String,amount:Number,icon:String,trend:String,trendType:{type:String,default:"positive",validator:r=>["positive","negative","neutral"].includes(r)},percentage:{type:Number,default:0},color:{type:String,default:"primary",validator:r=>["primary","success","warning","danger","info"].includes(r)}},setup(r){const g=r,y=O(()=>{const c={primary:"rgba(99, 102, 241, 0.1)",success:"rgba(34, 197, 94, 0.1)",warning:"rgba(245, 158, 11, 0.1)",danger:"rgba(239, 68, 68, 0.1)",info:"rgba(59, 130, 246, 0.1)"};return c[g.color]||c.primary});return O(()=>{const c={primary:"var(--primary-400)",success:"var(--success-400)",warning:"var(--warning-400)",danger:"var(--danger-400)",info:"var(--info-400)"};return c[g.color]||c.primary}),(c,k)=>(d(),l("div",{class:G(["stats-card",r.color])},[t("div",rt,[t("div",{class:"card-icon",style:D({background:y.value})},o(r.icon),5),t("div",{class:G(["card-trend",r.trendType])},o(r.trend),3)]),t("div",it,[t("h3",ct,o(r.title),1),t("p",lt,"R$ "+o(n(w)(r.amount)),1)]),t("div",dt,[t("div",ut,[t("div",mt,[t("div",{class:"progress-fill",style:D({width:r.percentage+"%"})},null,4)]),t("span",pt,o(r.percentage)+"% do objetivo",1)])])],2))}},I=J(vt,[["__scopeId","data-v-49148d3a"]]),gt=()=>{const r=_(!1),g=_(null),y=_(0),c=_({income:0,expenses:0,savings:0,investments:0}),k=_([]),B=_([]),R=_([]),M=_([]),b=_({labels:[],datasets:[{label:"Receita",backgroundColor:"#10b981",data:[]},{label:"Despesa",backgroundColor:"#ef4444",data:[]}]}),C=()=>{r.value=!0,g.value=null;try{const u=E.getData("transactions")||[],N=E.getData("categories")||[],$=E.getData("goals")||[],A=E.getData("cards")||[];y.value=u.reduce((e,i)=>e+i.amount,0);const s=u.filter(e=>e.type==="income").reduce((e,i)=>e+i.amount,0),p=u.filter(e=>e.type==="expense").reduce((e,i)=>e+i.amount,0);c.value={income:s,expenses:Math.abs(p),savings:s+p,investments:0},k.value=[...u].sort((e,i)=>new Date(i.date)-new Date(e.date)).slice(0,5).map(e=>{const i=N.find(h=>h.name===e.category);return{...e,icon:i?i.icon:"ðŸ’¸",categoryColor:i?i.color:"#808080"}}),B.value=$.slice(0,3).map(e=>({...e,percentage:e.targetAmount>0?(e.currentAmount/e.targetAmount*100).toFixed(0):0,current:e.currentAmount,target:e.targetAmount,icon:"ðŸŽ¯"}));const a=N.filter(e=>e.type==="expense").map(e=>{const i=u.filter(h=>h.type==="expense"&&h.category===e.name).reduce((h,T)=>h+T.amount,0);return{id:e.id,name:e.name,amount:Math.abs(i),color:e.color,percentage:c.value.expenses>0?(Math.abs(i)/c.value.expenses*100).toFixed(0):0}}).filter(e=>e.amount>0).sort((e,i)=>i.amount-e.amount);R.value=a,M.value=A.slice(0,3).map(e=>({...e,dueDate:new Date(e.dueDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),color:`linear-gradient(135deg, ${e.color}, ${_t(e.color,-40)})`}));const j=[],z=[],Y=[],x=new Date;for(let e=11;e>=0;e--){const i=new Date(x.getFullYear(),x.getMonth()-e,1);j.push(i.toLocaleDateString("pt-BR",{month:"short"}));const h=new Date(x.getFullYear(),x.getMonth()-e,1),T=new Date(x.getFullYear(),x.getMonth()-e+1,0),K=u.filter(v=>v.type==="income"&&new Date(v.date)>=h&&new Date(v.date)<=T).reduce((v,q)=>v+q.amount,0),P=u.filter(v=>v.type==="expense"&&new Date(v.date)>=h&&new Date(v.date)<=T).reduce((v,q)=>v+q.amount,0);z.push(K),Y.push(Math.abs(P))}b.value.labels=j,b.value.datasets[0].data=z,b.value.datasets[1].data=Y}catch(u){g.value="Failed to load dashboard data.",console.error(u)}finally{r.value=!1}};return H(C),{loading:r,error:g,totalBalance:y,stats:c,recentTransactions:k,goals:B,categories:R,creditCards:M,chartData:b,fetchData:C}};function _t(r,g){return r?"#"+r.replace(/^#/,"").replace(/../g,y=>("0"+Math.min(255,Math.max(0,parseInt(y,16)+g)).toString(16)).substr(-2)):"#000000"}const ht={class:"dashboard"},yt={class:"welcome-section"},ft={class:"welcome-content"},bt={class:"date-info"},wt={class:"welcome-stats"},Dt={key:0,class:"stat-badge"},kt={class:"stat-value"},Ct={class:"quick-actions-grid"},xt={class:"stats-grid"},St={class:"content-grid"},Bt={class:"chart-section card"},Rt={class:"chart-container"},Mt={class:"transactions-section card"},Lt={class:"section-header"},Nt={class:"transactions-list"},$t={key:0,class:"empty-data"},At={class:"transaction-details"},Tt={class:"transaction-meta"},Ft={class:"bottom-grid"},Vt={class:"goals-section card"},Et={class:"section-header"},It={class:"goals-list"},qt={key:0,class:"empty-data"},Gt={class:"goal-info"},jt={class:"goal-deadline"},zt={class:"goal-progress"},Yt={class:"progress-info"},Ot={class:"progress-percentage"},Ut={class:"progress-bar"},Zt={class:"categories-section card"},Ht={class:"section-header"},Jt={class:"categories-list"},Kt={key:0,class:"empty-data"},Pt={class:"category-info"},Qt={class:"category-name"},Wt={class:"category-details"},Xt={class:"category-amount"},ts={class:"category-percentage"},ss={class:"cards-section"},es={class:"section-header"},as={class:"cards-grid"},os={key:0,class:"empty-data-full"},ns={class:"card-header"},rs={class:"card-type"},is={class:"card-number"},cs={class:"card-footer"},ls={class:"card-info"},ds={class:"card-name"},us={class:"card-due"},ms={class:"card-balance"},ps={class:"balance-amount"},vs="UsuÃ¡rio",gs={__name:"Dashboard",setup(r){Z.register(tt,st,et,at,ot,nt),X();const{loading:g,totalBalance:y,stats:c,recentTransactions:k,goals:B,categories:R,creditCards:M,chartData:b}=gt(),C=_(null);let u=null;const N=new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),$=()=>{if(u&&u.destroy(),C.value){const A=C.value.getContext("2d");u=new Z(A,{type:"bar",data:b.value,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}};return H(()=>{$()}),Q(b,()=>{$()},{deep:!0}),(A,s)=>{const p=W("router-link");return d(),l("div",ht,[t("div",yt,[t("div",ft,[t("h1",{class:"welcome-title"},[s[0]||(s[0]=S(" OlÃ¡, ",-1)),t("span",{class:"text-gradient"},o(vs)),s[1]||(s[1]=S("! ðŸ‘‹ ",-1))]),s[3]||(s[3]=t("p",{class:"welcome-subtitle"},"Acompanhe suas finanÃ§as em tempo real",-1)),t("div",bt,[s[2]||(s[2]=t("span",{class:"date-icon"},"ðŸ“…",-1)),t("span",null,o(n(N)),1)])]),t("div",wt,[n(g)?L("",!0):(d(),l("div",Dt,[s[4]||(s[4]=t("span",{class:"stat-label"},"Saldo Total",-1)),t("span",kt,o(n(w)(n(y),"BRL")),1)]))])]),t("div",Ct,[m(p,{to:"/transactions",class:"quick-action"},{default:f(()=>[...s[5]||(s[5]=[t("div",{class:"action-icon add"},"+",-1),t("span",{class:"action-label"},"Nova TransaÃ§Ã£o",-1)])]),_:1}),m(p,{to:"/reports",class:"quick-action"},{default:f(()=>[...s[6]||(s[6]=[t("div",{class:"action-icon report"},"ðŸ“Š",-1),t("span",{class:"action-label"},"Gerar RelatÃ³rio",-1)])]),_:1}),m(p,{to:"/goals",class:"quick-action"},{default:f(()=>[...s[7]||(s[7]=[t("div",{class:"action-icon goal"},"ðŸŽ¯",-1),t("span",{class:"action-label"},"Minhas Metas",-1)])]),_:1}),m(p,{to:"/currency",class:"quick-action"},{default:f(()=>[...s[8]||(s[8]=[t("div",{class:"action-icon currency"},"ðŸŒŽ",-1),t("span",{class:"action-label"},"CÃ¢mbio",-1)])]),_:1})]),t("div",xt,[m(I,{title:"Receita Total",amount:n(c).income,icon:"ðŸ’°","trend-type":"positive"},null,8,["amount"]),m(I,{title:"Despesas Totais",amount:n(c).expenses,icon:"ðŸ’¸","trend-type":"negative",color:"danger"},null,8,["amount"]),m(I,{title:"Economias",amount:n(c).savings,icon:"ðŸ¦","trend-type":"positive",color:"success"},null,8,["amount"]),m(I,{title:"Investimentos",amount:n(c).investments,icon:"ðŸ“ˆ","trend-type":"positive",color:"warning"},null,8,["amount"])]),t("div",St,[t("div",Bt,[s[9]||(s[9]=t("div",{class:"section-header"},[t("h3",null,"Receitas vs Despesas (Ãšltimos 12 Meses)")],-1)),t("div",Rt,[t("canvas",{ref_key:"chartCanvas",ref:C},null,512)])]),t("div",Mt,[t("div",Lt,[s[11]||(s[11]=t("h3",null,"TransaÃ§Ãµes Recentes",-1)),m(p,{to:"/transactions",class:"view-all"},{default:f(()=>[...s[10]||(s[10]=[S(" Ver todas ",-1),t("span",{class:"arrow"},"â†’",-1)])]),_:1})]),t("div",Nt,[n(k).length===0?(d(),l("div",$t," Nenhuma transaÃ§Ã£o recente. ")):L("",!0),(d(!0),l(F,null,V(n(k),a=>(d(),l("div",{key:a.id,class:"transaction-item"},[t("div",{class:"transaction-icon",style:D({background:a.categoryColor})},o(a.icon),5),t("div",At,[t("h4",null,o(a.description),1),t("p",Tt,o(a.category)+" â€¢ "+o(n(U)(a.date)),1)]),t("div",{class:G(["transaction-amount",a.type])},o(a.type==="income"?"+":"-")+" "+o(n(w)(Math.abs(a.amount),"BRL")),3)]))),128))])])]),t("div",Ft,[t("div",Vt,[t("div",Et,[s[13]||(s[13]=t("h3",null,"Metas em Andamento",-1)),m(p,{to:"/goals",class:"view-all"},{default:f(()=>[...s[12]||(s[12]=[S(" Ver todas ",-1),t("span",{class:"arrow"},"â†’",-1)])]),_:1})]),t("div",It,[n(B).length===0?(d(),l("div",qt," Nenhuma meta em andamento. ")):L("",!0),(d(!0),l(F,null,V(n(B),a=>(d(),l("div",{key:a.id,class:"goal-item"},[t("div",Gt,[t("div",{class:"goal-icon",style:D({background:a.color})},o(a.icon),5),t("div",null,[t("h4",null,o(a.name),1),t("p",jt,o(n(U)(a.deadline)),1)])]),t("div",zt,[t("div",Yt,[t("span",null,o(n(w)(a.current,"BRL"))+" / "+o(n(w)(a.target,"BRL")),1),t("span",Ot,o(a.percentage)+"%",1)]),t("div",Ut,[t("div",{class:"progress-fill",style:D({width:a.percentage+"%",background:a.color})},null,4)])])]))),128))])]),t("div",Zt,[t("div",Ht,[s[15]||(s[15]=t("h3",null,"Gastos por Categoria (MÃªs)",-1)),m(p,{to:"/categories",class:"view-all"},{default:f(()=>[...s[14]||(s[14]=[S(" Ver todas ",-1),t("span",{class:"arrow"},"â†’",-1)])]),_:1})]),t("div",Jt,[n(R).length===0?(d(),l("div",Kt," Nenhum gasto este mÃªs. ")):L("",!0),(d(!0),l(F,null,V(n(R),a=>(d(),l("div",{key:a.id,class:"category-item"},[t("div",Pt,[t("div",{class:"category-color",style:D({background:a.color})},null,4),t("span",Qt,o(a.name),1)]),t("div",Wt,[t("span",Xt,o(n(w)(a.amount,"BRL")),1),t("span",ts,o(a.percentage)+"%",1)])]))),128))])])]),t("div",ss,[t("div",es,[s[17]||(s[17]=t("h3",null,"CartÃµes de CrÃ©dito",-1)),m(p,{to:"/credit-cards",class:"view-all"},{default:f(()=>[...s[16]||(s[16]=[S(" Gerenciar cartÃµes ",-1),t("span",{class:"arrow"},"â†’",-1)])]),_:1})]),t("div",as,[n(M).length===0?(d(),l("div",os," Nenhum cartÃ£o de crÃ©dito cadastrado. ")):L("",!0),(d(!0),l(F,null,V(n(M),a=>(d(),l("div",{key:a.id,class:"credit-card",style:D({background:a.color})},[t("div",ns,[t("div",rs,o(a.type),1),s[18]||(s[18]=t("div",{class:"card-chip"},"ðŸ’³",-1))]),t("div",is,o(a.number),1),t("div",cs,[t("div",ls,[t("div",ds,o(a.name),1),t("div",us,"Vence: "+o(a.dueDate),1)]),t("div",ms,[s[19]||(s[19]=t("div",{class:"balance-label"},"Saldo",-1)),t("div",ps,o(n(w)(a.balance,"BRL")),1)])])],4))),128))])])])}}},ws=J(gs,[["__scopeId","data-v-321e6730"]]);export{ws as default};
