import{d as W,r as g,c as R,o as ee,a as C,e,f as U,E as te,I as x,F as B,B as E,A as n,t as o,K as se,b as P,p,n as I}from"./vendor-kE9Pwckw.js";import{C as J,r as oe}from"./charts-BaeV1Cpd.js";import{l as D}from"./localStorageService-Bm_UUCrj.js";import{f as z}from"./formatters-B8MMj10x.js";import{_ as ae}from"./index-C2foQiSO.js";import"./utils-B9ygI19o.js";const ne=W("currency",()=>{const i=g([]),r=g("USD");return{currencies:i,baseCurrency:r,setCurrencies:f=>{i.value=f},setBaseCurrency:f=>{r.value=f},getCurrencyByCode:f=>i.value.find(a=>a.code===f)}}),F="currencies",M="base_currency",re=[{code:"USD",name:"US Dollar",symbol:"$",rate:1,country:"United States",flag:"ðŸ‡ºðŸ‡¸"},{code:"EUR",name:"Euro",symbol:"â‚¬",rate:.85,country:"European Union",flag:"ðŸ‡ªðŸ‡º"},{code:"GBP",name:"British Pound",symbol:"Â£",rate:.73,country:"United Kingdom",flag:"ðŸ‡¬ðŸ‡§"},{code:"JPY",name:"Japanese Yen",symbol:"Â¥",rate:110.5,country:"Japan",flag:"ðŸ‡¯ðŸ‡µ"},{code:"CAD",name:"Canadian Dollar",symbol:"C$",rate:1.25,country:"Canada",flag:"ðŸ‡¨ðŸ‡¦"},{code:"AUD",name:"Australian Dollar",symbol:"A$",rate:1.35,country:"Australia",flag:"ðŸ‡¦ðŸ‡º"},{code:"BRL",name:"Brazilian Real",symbol:"R$",rate:5.2,country:"Brazil",flag:"ðŸ‡§ðŸ‡·"},{code:"CNY",name:"Chinese Yuan",symbol:"Â¥",rate:6.45,country:"China",flag:"ðŸ‡¨ðŸ‡³"}],le=()=>{const i=ne(),r=g(null),c=async()=>{r.value=null;try{let a=D.getData(F);a||(a=re,D.saveData(F,a)),i.setCurrencies(a);let l=D.getData(M);l||(l="BRL",D.saveData(M,l)),i.setBaseCurrency(l)}catch{r.value="Failed to fetch currencies"}},y=(a,l,h)=>{const v=i.currencies.find(b=>b.code===l),u=i.currencies.find(b=>b.code===h);return!v||!u?a:a/v.rate*u.rate},_=async()=>{r.value=null;try{const a=i.currencies.map(l=>({...l,rate:l.code==="USD"?1:l.rate*(.95+Math.random()*.1)}));D.saveData(F,a),i.setCurrencies(a)}catch{r.value="Failed to update currency rates"}},f=async a=>{r.value=null;try{D.saveData(M,a),i.setBaseCurrency(a)}catch(l){throw r.value="Failed to set base currency",l}};return{currencies:R(()=>i.currencies),baseCurrency:R(()=>i.baseCurrency),loading:g(!1),error:r,fetchCurrencies:c,convertCurrency:y,updateRates:_,setBaseCurrency:f}},de=(i,r)=>{if(!i||i.length===0){console.error("No data to export");return}const c=Object.keys(i[0]),_=[c.join(","),...i.map(l=>c.map(h=>{const v=l[h];return typeof v=="string"&&v.includes(",")?`"${v}"`:v}).join(","))].join(`
`),f=new Blob([_],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(a.download!==void 0){const l=URL.createObjectURL(f);a.setAttribute("href",l),a.setAttribute("download",`${r}_${new Date().toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},ie={class:"currency"},ce={class:"converter card"},ue={class:"converter-form"},ve={class:"amount-section"},me={class:"input-group"},Ce={class:"currency-section"},pe={class:"currency-input"},fe=["value"],ge={class:"currency-info"},ye={class:"currency-input"},_e=["value"],be={class:"currency-info"},he={class:"result-section"},Ue={class:"result-card"},De={class:"result-amount"},Re={class:"result-label"},Se={class:"result-card highlighted"},xe={class:"result-amount"},Be={class:"converter-actions"},Ee=["disabled"],ke=["disabled"],$e={class:"currency-settings card"},Ae={class:"settings-form"},we={class:"form-group"},Fe=["value"],Me={class:"exchange-rates card"},Te={class:"rates-header"},Ve={class:"last-updated"},Ne={key:0,class:"loading"},Ye={key:1,class:"error"},Pe={class:"rates-grid"},Ie={class:"rate-flag"},Je={class:"rate-info"},ze={class:"rate-code"},Le={class:"rate-name"},je={class:"rate-value"},Ke={class:"rate-amount"},Oe={class:"rates-actions"},Ge=["disabled"],Xe={class:"currency-chart card"},Ze={class:"chart-wrapper"},qe={class:"chart-controls"},He=["value"],Qe={__name:"Currency",setup(i){J.register(...oe);const{currencies:r,baseCurrency:c,loading:y,error:_,fetchCurrencies:f,convertCurrency:a,updateRates:l,setBaseCurrency:h}=le(),v=g("100"),u=g("USD"),m=g("EUR"),b=g(null),S=g("EUR"),T=g("30d");let A=null;const L=g({USD_EUR:[.85,.86,.84,.87,.85,.83,.86],USD_GBP:[.73,.74,.72,.75,.73,.71,.74],USD_JPY:[110.5,112.3,109.8,111.2,110.7,109.5,111.8]}),j=R(()=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),K=R(()=>{const d=r.value.find(t=>t.code===u.value);return d?d.name:""}),O=R(()=>{const d=r.value.find(t=>t.code===m.value);return d?d.name:""}),G=R(()=>v.value?a(parseFloat(v.value),u.value,m.value):0),k=(d,t)=>{if(d===t)return 1;const s=r.value.find(w=>w.code===d),$=r.value.find(w=>w.code===t);return!s||!$?1:$.rate/s.rate},V=d=>d>=1?d.toFixed(4):d.toFixed(6),X=d=>{const t=(Math.random()-.5)*2;return`${t>=0?"+":""}${t.toFixed(2)}%`},Z=d=>Math.random()-.5>=0?"positive":"negative",q=()=>{const d=u.value;u.value=m.value,m.value=d},H=async()=>{console.log("Converted:",v.value,u.value,"to",m.value)},Q=()=>{const d=r.value.map(t=>({Currency:`${t.flag} ${t.code}`,Name:t.name,Rate:`1 ${c.value} = ${V(1/k(c.value,t.code))} ${t.code}`,Country:t.country}));de(d,"exchange-rates")},N=()=>{Y()},Y=()=>{if(!b.value)return;const d=b.value.getContext("2d");A&&A.destroy();const t=["Jan","Feb","Mar","Apr","May","Jun","Jul"],s=`USD_${S.value}`,$=L.value[s]||Array(7).fill(1).map(()=>.85+Math.random()*.1);A=new J(d,{type:"line",data:{labels:t,datasets:[{label:`${c.value}/${S.value}`,data:$,borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!1,title:{display:!0,text:`Rate (1 ${c.value} = X ${S.value})`}}}}})};return ee(()=>{f().then(()=>{Y()})}),(d,t)=>(p(),C("div",ie,[t[20]||(t[20]=e("h1",null,"CÃ¢mbio e ConversÃ£o de Moedas",-1)),e("div",ce,[t[14]||(t[14]=e("h3",null,"Conversor de Moedas",-1)),e("div",ue,[e("div",ve,[e("div",me,[t[9]||(t[9]=e("label",null,"Valor",-1)),U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),type:"number",step:"0.01",class:"form-control",placeholder:"100"},null,512),[[te,v.value]])]),e("div",{class:"swap-button",onClick:q}," ðŸ”„ ")]),e("div",Ce,[e("div",pe,[t[10]||(t[10]=e("label",null,"De",-1)),U(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"form-control"},[(p(!0),C(B,null,E(n(r),s=>(p(),C("option",{key:s.code,value:s.code},o(s.flag)+" "+o(s.code)+" - "+o(s.name),9,fe))),128))],512),[[x,u.value]]),e("div",ge,[e("span",null,"1 "+o(u.value)+" = "+o(k(u.value,m.value).toFixed(4))+" "+o(m.value),1)])]),e("div",ye,[t[11]||(t[11]=e("label",null,"Para",-1)),U(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),class:"form-control"},[(p(!0),C(B,null,E(n(r),s=>(p(),C("option",{key:s.code,value:s.code},o(s.flag)+" "+o(s.code)+" - "+o(s.name),9,_e))),128))],512),[[x,m.value]]),e("div",be,[e("span",null,"1 "+o(m.value)+" = "+o(k(m.value,u.value).toFixed(4))+" "+o(u.value),1)])])]),e("div",he,[e("div",Ue,[e("div",De,o(n(z)(parseFloat(v.value)||0,u.value)),1),e("div",Re,o(K.value)+" â†’ "+o(O.value),1)]),t[13]||(t[13]=e("div",{class:"result-arrow"},"â†’",-1)),e("div",Se,[e("div",xe,o(n(z)(G.value,m.value)),1),t[12]||(t[12]=e("div",{class:"result-label"},"Valor Convertido",-1))])]),e("div",Be,[e("button",{onClick:H,class:"btn btn-primary",disabled:n(y)},o(n(y)?"Convertendo...":"Converter"),9,Ee),e("button",{onClick:t[3]||(t[3]=(...s)=>n(l)&&n(l)(...s)),class:"btn btn-secondary",disabled:n(y)}," ðŸ”„ Atualizar Taxas ",8,ke)])])]),e("div",$e,[t[17]||(t[17]=e("h3",null,"ConfiguraÃ§Ãµes de Moeda Base",-1)),e("div",Ae,[e("div",we,[t[15]||(t[15]=e("label",null,"Moeda Base",-1)),U(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>se(c)?c.value=s:null),onChange:t[5]||(t[5]=(...s)=>n(h)&&n(h)(...s)),class:"form-control"},[(p(!0),C(B,null,E(n(r),s=>(p(),C("option",{key:s.code,value:s.code},o(s.flag)+" "+o(s.code)+" - "+o(s.name),9,Fe))),128))],544),[[x,n(c)]])]),t[16]||(t[16]=e("p",{class:"settings-info"}," Todos os valores serÃ£o exibidos em sua moeda base. As taxas de cÃ¢mbio sÃ£o atualizadas automaticamente. ",-1))])]),e("div",Me,[e("div",Te,[e("h3",null,"Taxas de CÃ¢mbio (Base: "+o(n(c))+")",1),e("span",Ve,"Ãšltima atualizaÃ§Ã£o: "+o(j.value),1)]),n(y)?(p(),C("div",Ne,"Carregando taxas de cÃ¢mbio...")):P("",!0),n(_)?(p(),C("div",Ye,o(n(_)),1)):P("",!0),e("div",Pe,[(p(!0),C(B,null,E(n(r),s=>(p(),C("div",{key:s.code,class:I(["rate-item",{highlighted:s.code===n(c)}])},[e("div",Ie,o(s.flag),1),e("div",Je,[e("div",ze,o(s.code),1),e("div",Le,o(s.name),1)]),e("div",je,[e("div",Ke," 1 "+o(n(c))+" = "+o(V(1/k(n(c),s.code)))+" "+o(s.code),1),e("div",{class:I(["rate-change",Z(s.code)])},o(X(s.code)),3)])],2))),128))]),e("div",Oe,[e("button",{onClick:t[6]||(t[6]=(...s)=>n(l)&&n(l)(...s)),class:"btn btn-primary",disabled:n(y)},o(n(y)?"Updating...":"Refresh Rates"),9,Ge),e("button",{onClick:Q,class:"btn btn-secondary"}," ðŸ“Š Export Rates ")])]),e("div",Xe,[t[19]||(t[19]=e("h3",null,"Exchange Rate Trends",-1)),e("div",Ze,[e("canvas",{ref_key:"trendChart",ref:b},null,512)]),e("div",qe,[U(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>S.value=s),onChange:N,class:"form-control"},[(p(!0),C(B,null,E(n(r).filter(s=>s.code!==n(c)),s=>(p(),C("option",{key:s.code,value:s.code},o(s.flag)+" "+o(s.code),9,He))),128))],544),[[x,S.value]]),U(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>T.value=s),onChange:N,class:"form-control"},[...t[18]||(t[18]=[e("option",{value:"7d"},"7 Days",-1),e("option",{value:"30d"},"30 Days",-1),e("option",{value:"90d"},"90 Days",-1),e("option",{value:"1y"},"1 Year",-1)])],544),[[x,T.value]])])])]))}},nt=ae(Qe,[["__scopeId","data-v-e968b49e"]]);export{nt as default};
