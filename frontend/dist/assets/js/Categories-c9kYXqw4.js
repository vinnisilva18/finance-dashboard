import{r as y,c as D,B as q,o as R,a as p,e,b as h,t as i,f,E,I as $,h as V,C as j,z as u,D as H,F as I,A as U,m as v}from"./vendor-CeDlel3h.js";import{u as L,a as k}from"./category-_qF5EANa.js";import{f as M}from"./formatters-B8MMj10x.js";import{_ as P}from"./index-Dv0HwUHl.js";import"./utils-B9ygI19o.js";const G=()=>{const g=L(),d=y(!1),c=y(null),_=async()=>{var s,n;d.value=!0,c.value=null;try{const t=await k.get("/categories");g.setCategories(t.data)}catch(t){throw c.value=((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch categories",t}finally{d.value=!1}},C=async s=>{var n,t;d.value=!0,c.value=null;try{const l=await k.post("/categories",s);return g.addCategory(l.data),l.data}catch(l){throw c.value=((t=(n=l.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to add category",l}finally{d.value=!1}},w=async(s,n)=>{var t,l;d.value=!0,c.value=null;try{const m=await k.put(`/categories/${s}`,n);return g.updateCategory(s,m.data),m.data}catch(m){throw c.value=((l=(t=m.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to update category",m}finally{d.value=!1}},F=async s=>{var n,t;d.value=!0,c.value=null;try{await k.delete(`/categories/${s}`),g.deleteCategory(s)}catch(l){throw c.value=((t=(n=l.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to delete category",l}finally{d.value=!1}},S=D(()=>g.categories.filter(s=>s.type==="expense")),b=D(()=>g.categories.filter(s=>s.type==="income"));return{categories:D(()=>g.categories),expenseCategories:S,incomeCategories:b,loading:d,error:c,fetchCategories:_,addCategory:C,updateCategory:w,deleteCategory:F}},J={class:"categories"},K={class:"header"},O={key:0,class:"category-form card"},Q={class:"form-row"},W={class:"form-group"},X={class:"form-group"},Y={class:"form-row"},Z={class:"form-group"},ee={class:"color-picker"},te={class:"form-group"},oe={class:"form-group"},ae={class:"form-actions"},se=["disabled"],ne={key:1,class:"loading"},le={key:2,class:"error"},ie={class:"categories-grid"},re={class:"section"},de={class:"categories-list"},ce={class:"category-header"},ue={class:"category-info"},pe={class:"category-icon"},ve={class:"category-actions"},ge=["onClick"],me=["onClick"],ye={class:"category-details"},_e={class:"budget-info"},fe={class:"category-type"},Ce={class:"section"},be={class:"categories-list"},he={class:"category-header"},ke={class:"category-info"},we={class:"category-icon"},Fe={class:"category-actions"},Se=["onClick"],xe=["onClick"],De={class:"category-details"},Ee={class:"budget-info"},Ve={class:"category-type"},Ae={__name:"Categories",setup(g){const{expenseCategories:d,incomeCategories:c,loading:_,error:C,fetchCategories:w,addCategory:F,updateCategory:S,deleteCategory:b}=G(),s=y(!1),n=y(null),t=q({name:"",type:"expense",color:"#4CAF50",budget:0,icon:"restaurant"});y(null);const l=y(null),m=y(null);R(()=>{w()});const N=async()=>{n.value?(await S(n.value.id,t),n.value=null):await F(t),B(),s.value=!1},A=r=>{n.value=r,t.name=r.name,t.type=r.type,t.color=r.color,t.budget=r.budget,t.icon=r.icon,m.value=r.image,r.image&&(l.value=r.image),s.value=!0},T=()=>{n.value=null,B(),s.value=!1},B=()=>{t.name="",t.type="expense",t.color="#4CAF50",t.budget=0,t.icon="restaurant",removeImage()},z=async r=>{confirm("Tem certeza que deseja deletar esta categoria? Isto nÃ£o irÃ¡ deletar as transaÃ§Ãµes relacionadas.")&&await b(r)};return(r,o)=>(v(),p("div",J,[e("div",K,[o[6]||(o[6]=e("h1",null,"Categorias",-1)),e("button",{onClick:o[0]||(o[0]=a=>s.value=!s.value),class:"btn btn-primary"},i(s.value?"Cancelar":"+ Adicionar Categoria"),1)]),s.value?(v(),p("div",O,[e("h3",null,i(n.value?"Editar Categoria":"Adicionar Nova Categoria"),1),e("form",{onSubmit:H(N,["prevent"])},[e("div",Q,[e("div",W,[o[7]||(o[7]=e("label",null,"Nome da Categoria",-1)),f(e("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>t.name=a),type:"text",required:"",class:"form-control"},null,512),[[E,t.name]])]),e("div",X,[o[9]||(o[9]=e("label",null,"Tipo",-1)),f(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>t.type=a),class:"form-control",required:""},[...o[8]||(o[8]=[e("option",{value:"expense"},"Despesa",-1),e("option",{value:"income"},"Renda",-1)])],512),[[$,t.type]])])]),e("div",Y,[e("div",Z,[o[10]||(o[10]=e("label",null,"Cor",-1)),e("div",ee,[f(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>t.color=a),type:"color",class:"color-input"},null,512),[[E,t.color]]),e("span",{class:"color-preview",style:V({backgroundColor:t.color})},null,4),e("span",null,i(t.color),1)])]),e("div",te,[o[11]||(o[11]=e("label",null,"Monthly Budget",-1)),f(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>t.budget=a),type:"number",step:"0.01",class:"form-control"},null,512),[[E,t.budget]])])]),e("div",oe,[o[13]||(o[13]=e("label",null,"Icon",-1)),f(e("select",{"onUpdate:modelValue":o[5]||(o[5]=a=>t.icon=a),class:"form-control"},[...o[12]||(o[12]=[j('<option value="restaurant" data-v-32d99547>Food &amp; Dining</option><option value="directions_car" data-v-32d99547>Transportation</option><option value="shopping_cart" data-v-32d99547>Shopping</option><option value="movie" data-v-32d99547>Entertainment</option><option value="home" data-v-32d99547>Utilities</option><option value="medical_services" data-v-32d99547>Healthcare</option><option value="attach_money" data-v-32d99547>Salary</option><option value="work" data-v-32d99547>Freelance</option><option value="school" data-v-32d99547>Education</option><option value="flight" data-v-32d99547>Travel</option>',10)])],512),[[$,t.icon]])]),e("div",ae,[e("button",{type:"submit",disabled:u(_),class:"btn btn-primary"},i(u(_)?"Salvando...":n.value?"Atualizar":"Adicionar Categoria"),9,se),n.value?(v(),p("button",{key:0,onClick:T,type:"button",class:"btn btn-secondary"}," Cancelar ")):h("",!0)])],32)])):h("",!0),u(_)&&!s.value?(v(),p("div",ne,"Carregando categorias...")):h("",!0),u(C)?(v(),p("div",le,i(u(C)),1)):h("",!0),e("div",ie,[e("div",re,[o[14]||(o[14]=e("h2",null,"Categorias de Despesa",-1)),e("div",de,[(v(!0),p(I,null,U(u(d),a=>(v(),p("div",{key:a.id,class:"category-item card"},[e("div",ce,[e("div",{class:"category-color",style:V({backgroundColor:a.color})},null,4),e("div",ue,[e("h4",null,i(a.name),1),e("span",pe,i(a.icon),1)]),e("div",ve,[e("button",{onClick:x=>A(a),class:"btn-icon",title:"Edit"}," âœï¸ ",8,ge),e("button",{onClick:x=>u(b)(a.id),class:"btn-icon",title:"Delete"}," ğŸ—‘ï¸ ",8,me)])]),e("div",ye,[e("div",_e,[e("span",null,"Budget: "+i(u(M)(a.budget)),1),e("span",fe,i(a.type),1)])])]))),128))])]),e("div",Ce,[o[15]||(o[15]=e("h2",null,"Categorias de Renda",-1)),e("div",be,[(v(!0),p(I,null,U(u(c),a=>(v(),p("div",{key:a.id,class:"category-item card"},[e("div",he,[e("div",{class:"category-color",style:V({backgroundColor:a.color})},null,4),e("div",ke,[e("h4",null,i(a.name),1),e("span",we,i(a.icon),1)]),e("div",Fe,[e("button",{onClick:x=>A(a),class:"btn-icon",title:"Edit"}," âœï¸ ",8,Se),e("button",{onClick:x=>z(a.id),class:"btn-icon",title:"Delete"}," ğŸ—‘ï¸ ",8,xe)])]),e("div",De,[e("div",Ee,[e("span",null,"Budget: "+i(u(M)(a.budget)),1),e("span",Ve,i(a.type),1)])])]))),128))])])])]))}},Ne=P(Ae,[["__scopeId","data-v-32d99547"]]);export{Ne as default};
