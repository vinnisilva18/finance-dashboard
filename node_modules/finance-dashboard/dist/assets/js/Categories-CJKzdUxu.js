import{d as R,r as x,c as B,B as $,o as q,a as y,e,b as S,t as r,f as h,E as A,I as T,h as E,C as O,z as u,D as G,F as V,A as U,m}from"./vendor-LfCTP-hD.js";import{l as C}from"./localStorageService-Bm_UUCrj.js";import{f as z}from"./formatters-B8MMj10x.js";import{_ as L}from"./index-t8Iq_7gf.js";const P=R("category",()=>{const i=x([]);return{categories:i,setCategories:l=>{i.value=l},addCategory:l=>{i.value.push(l)},deleteCategory:l=>{i.value=i.value.filter(c=>c.id!==l)},updateCategory:(l,c)=>{const a=i.value.findIndex(n=>n.id===l);a!==-1&&(i.value[a]={...i.value[a],...c})},getCategoryById:l=>i.value.find(c=>c.id===l),getCategoriesByType:l=>i.value.filter(c=>c.type===l)}}),b="categories",j=[{id:1,name:"Mercado",type:"expense",color:"#4CAF50",icon:"shopping_cart",budget:0},{id:2,name:"Transporte/Uber",type:"expense",color:"#2196F3",icon:"directions_car",budget:0},{id:3,name:"Assinaturas",type:"expense",color:"#FF9800",icon:"subscriptions",budget:0},{id:4,name:"RemÃ©dios",type:"expense",color:"#9C27B0",icon:"medical_services",budget:0},{id:5,name:"Seguro de Celular",type:"expense",color:"#607D8B",icon:"phonelink_lock",budget:0},{id:6,name:"Shopping",type:"expense",color:"#FF5722",icon:"shopping_bag",budget:0},{id:7,name:"Condominio",type:"expense",color:"#4CAF50",icon:"home",budget:0},{id:8,name:"Psicologia",type:"expense",color:"#2196F3",icon:"psychology",budget:0},{id:9,name:"ConvÃªnio",type:"expense",color:"#FF9800",icon:"health_and_safety",budget:0},{id:10,name:"Plano FunerÃ¡rio",type:"expense",color:"#9C27B0",icon:"family_restroom",budget:0},{id:11,name:"Enel",type:"expense",color:"#607D8B",icon:"lightbulb",budget:0},{id:12,name:"Financiamento",type:"expense",color:"#FF5722",icon:"account_balance",budget:0},{id:13,name:"Intenet",type:"expense",color:"#4CAF50",icon:"wifi",budget:0},{id:14,name:"Lazer",type:"expense",color:"#2196F3",icon:"sports_esports",budget:0},{id:15,name:"Celular",type:"expense",color:"#FF9800",icon:"smartphone",budget:0},{id:16,name:"Outros",type:"expense",color:"#9C27B0",icon:"more_horiz",budget:0}],H=()=>{const i=P(),d=x(!1),p=x(null),_=async()=>{d.value=!0,p.value=null;try{let a=C.getData(b);a||(a=j,C.saveData(b,a)),i.setCategories(a)}catch{p.value="Failed to fetch categories"}finally{d.value=!1}},f=async a=>{d.value=!0;try{const n={...a,id:Date.now()},g=[...C.getData(b)||[],n];C.saveData(b,g),i.addCategory(n)}catch(n){throw p.value="Failed to add category",n}finally{d.value=!1}},F=async(a,n)=>{d.value=!0;try{let t=C.getData(b)||[];const g=t.findIndex(D=>D.id===a);g!==-1&&(t[g]={...t[g],...n},C.saveData(b,t),i.updateCategory(a,n))}catch(t){throw p.value="Failed to update category",t}finally{d.value=!1}},k=async a=>{d.value=!0;try{const t=(C.getData(b)||[]).filter(g=>g.id!==a);C.saveData(b,t),i.deleteCategory(a)}catch(n){throw p.value="Failed to delete category",n}finally{d.value=!1}},l=B(()=>i.categories.filter(a=>a.type==="expense")),c=B(()=>i.categories.filter(a=>a.type==="income"));return{categories:B(()=>i.categories),expenseCategories:l,incomeCategories:c,loading:d,error:p,fetchCategories:_,addCategory:f,updateCategory:F,deleteCategory:k}},K={class:"categories"},Y={class:"header"},J={key:0,class:"category-form card"},Q={class:"form-row"},W={class:"form-group"},X={class:"form-group"},Z={class:"form-row"},ee={class:"form-group"},te={class:"color-picker"},oe={class:"form-group"},ae={class:"form-group"},se={class:"form-actions"},ne=["disabled"],ie={key:1,class:"loading"},le={key:2,class:"error"},re={class:"categories-grid"},de={class:"section"},ce={class:"categories-list"},ue={class:"category-header"},pe={class:"category-info"},ge={class:"category-icon"},ve={class:"category-actions"},ye=["onClick"],me=["onClick"],Ce={class:"category-details"},be={class:"budget-info"},_e={class:"category-type"},fe={class:"section"},he={class:"categories-list"},xe={class:"category-header"},Fe={class:"category-info"},ke={class:"category-icon"},De={class:"category-actions"},Se=["onClick"],we=["onClick"],Be={class:"category-details"},Ae={class:"budget-info"},Ee={class:"category-type"},Ie={__name:"Categories",setup(i){const{expenseCategories:d,incomeCategories:p,loading:_,error:f,fetchCategories:F,addCategory:k,updateCategory:l,deleteCategory:c}=H(),a=x(!1),n=x(null),t=$({name:"",type:"expense",color:"#4CAF50",budget:0,icon:"restaurant"});q(()=>{F()});const g=async()=>{n.value?(await l(n.value.id,t),n.value=null):await k(t),I(),a.value=!1},D=v=>{n.value=v,t.name=v.name,t.type=v.type,t.color=v.color,t.budget=v.budget,t.icon=v.icon,a.value=!0},M=()=>{n.value=null,I(),a.value=!1},I=()=>{t.name="",t.type="expense",t.color="#4CAF50",t.budget=0,t.icon="restaurant"},N=async v=>{confirm("Tem certeza que deseja deletar esta categoria? Isto nÃ£o irÃ¡ deletar as transaÃ§Ãµes relacionadas.")&&await c(v)};return(v,o)=>(m(),y("div",K,[e("div",Y,[o[6]||(o[6]=e("h1",null,"Categorias",-1)),e("button",{onClick:o[0]||(o[0]=s=>a.value=!a.value),class:"btn btn-primary"},r(a.value?"Cancelar":"+ Adicionar Categoria"),1)]),a.value?(m(),y("div",J,[e("h3",null,r(n.value?"Editar Categoria":"Adicionar Nova Categoria"),1),e("form",{onSubmit:G(g,["prevent"])},[e("div",Q,[e("div",W,[o[7]||(o[7]=e("label",null,"Nome da Categoria",-1)),h(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>t.name=s),type:"text",required:"",class:"form-control"},null,512),[[A,t.name]])]),e("div",X,[o[9]||(o[9]=e("label",null,"Tipo",-1)),h(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>t.type=s),class:"form-control",required:""},[...o[8]||(o[8]=[e("option",{value:"expense"},"Despesa",-1),e("option",{value:"income"},"Renda",-1)])],512),[[T,t.type]])])]),e("div",Z,[e("div",ee,[o[10]||(o[10]=e("label",null,"Cor",-1)),e("div",te,[h(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>t.color=s),type:"color",class:"color-input"},null,512),[[A,t.color]]),e("span",{class:"color-preview",style:E({backgroundColor:t.color})},null,4),e("span",null,r(t.color),1)])]),e("div",oe,[o[11]||(o[11]=e("label",null,"Monthly Budget",-1)),h(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>t.budget=s),type:"number",step:"0.01",class:"form-control"},null,512),[[A,t.budget]])])]),e("div",ae,[o[13]||(o[13]=e("label",null,"Icon",-1)),h(e("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>t.icon=s),class:"form-control"},[...o[12]||(o[12]=[O('<option value="restaurant" data-v-849d08db>Food &amp; Dining</option><option value="directions_car" data-v-849d08db>Transportation</option><option value="shopping_cart" data-v-849d08db>Shopping</option><option value="movie" data-v-849d08db>Entertainment</option><option value="home" data-v-849d08db>Utilities</option><option value="medical_services" data-v-849d08db>Healthcare</option><option value="attach_money" data-v-849d08db>Salary</option><option value="work" data-v-849d08db>Freelance</option><option value="school" data-v-849d08db>Education</option><option value="flight" data-v-849d08db>Travel</option>',10)])],512),[[T,t.icon]])]),e("div",se,[e("button",{type:"submit",disabled:u(_),class:"btn btn-primary"},r(u(_)?"Salvando...":n.value?"Atualizar":"Adicionar Categoria"),9,ne),n.value?(m(),y("button",{key:0,onClick:M,type:"button",class:"btn btn-secondary"}," Cancelar ")):S("",!0)])],32)])):S("",!0),u(_)&&!a.value?(m(),y("div",ie,"Carregando categorias...")):S("",!0),u(f)?(m(),y("div",le,r(u(f)),1)):S("",!0),e("div",re,[e("div",de,[o[14]||(o[14]=e("h2",null,"Categorias de Despesa",-1)),e("div",ce,[(m(!0),y(V,null,U(u(d),s=>(m(),y("div",{key:s.id,class:"category-item card"},[e("div",ue,[e("div",{class:"category-color",style:E({backgroundColor:s.color})},null,4),e("div",pe,[e("h4",null,r(s.name),1),e("span",ge,r(s.icon),1)]),e("div",ve,[e("button",{onClick:w=>D(s),class:"btn-icon",title:"Edit"}," âœï¸ ",8,ye),e("button",{onClick:w=>u(c)(s.id),class:"btn-icon",title:"Delete"}," ğŸ—‘ï¸ ",8,me)])]),e("div",Ce,[e("div",be,[e("span",null,"Budget: "+r(u(z)(s.budget)),1),e("span",_e,r(s.type),1)])])]))),128))])]),e("div",fe,[o[15]||(o[15]=e("h2",null,"Categorias de Renda",-1)),e("div",he,[(m(!0),y(V,null,U(u(p),s=>(m(),y("div",{key:s.id,class:"category-item card"},[e("div",xe,[e("div",{class:"category-color",style:E({backgroundColor:s.color})},null,4),e("div",Fe,[e("h4",null,r(s.name),1),e("span",ke,r(s.icon),1)]),e("div",De,[e("button",{onClick:w=>D(s),class:"btn-icon",title:"Edit"}," âœï¸ ",8,Se),e("button",{onClick:w=>N(s.id),class:"btn-icon",title:"Delete"}," ğŸ—‘ï¸ ",8,we)])]),e("div",Be,[e("div",Ae,[e("span",null,"Budget: "+r(u(z)(s.budget)),1),e("span",Ee,r(s.type),1)])])]))),128))])])])]))}},Me=L(Ie,[["__scopeId","data-v-849d08db"]]);export{Me as default};
