import{d as g,r as s,c as f}from"./vendor-kE9Pwckw.js";import{l as c}from"./localStorageService-Bm_UUCrj.js";import{a as v}from"./index-CZQAM9fZ.js";const D=g("currency",()=>{const r=s([]),n=s("USD");return{currencies:r,baseCurrency:n,setCurrencies:t=>{r.value=t},setBaseCurrency:t=>{n.value=t},getCurrencyByCode:t=>r.value.find(a=>a.code===t)}}),u="currencies",l="base_currency",b=[{code:"USD",name:"US Dollar",symbol:"$",rate:1,country:"United States",flag:"ðŸ‡ºðŸ‡¸"},{code:"EUR",name:"Euro",symbol:"â‚¬",rate:.85,country:"European Union",flag:"ðŸ‡ªðŸ‡º"},{code:"GBP",name:"British Pound",symbol:"Â£",rate:.73,country:"United Kingdom",flag:"ðŸ‡¬ðŸ‡§"},{code:"JPY",name:"Japanese Yen",symbol:"Â¥",rate:110.5,country:"Japan",flag:"ðŸ‡¯ðŸ‡µ"},{code:"CAD",name:"Canadian Dollar",symbol:"C$",rate:1.25,country:"Canada",flag:"ðŸ‡¨ðŸ‡¦"},{code:"AUD",name:"Australian Dollar",symbol:"A$",rate:1.35,country:"Australia",flag:"ðŸ‡¦ðŸ‡º"},{code:"BRL",name:"Brazilian Real",symbol:"R$",rate:5.2,country:"Brazil",flag:"ðŸ‡§ðŸ‡·"},{code:"CNY",name:"Chinese Yuan",symbol:"Â¥",rate:6.45,country:"China",flag:"ðŸ‡¨ðŸ‡³"}],E=()=>{const r=D(),n=s(null),i=async()=>{n.value=null;try{const a=await v.get("/currencies");r.setCurrencies(a.data);let e=c.getData(l);e||(e="BRL",c.saveData(l,e)),r.setBaseCurrency(e)}catch{n.value="Failed to fetch currencies";let e=c.getData(u);e||(e=b,c.saveData(u,e)),r.setCurrencies(e)}},y=(a,e,S)=>{const C=r.currencies.find(o=>o.code===e),m=r.currencies.find(o=>o.code===S);return!C||!m?a:a/C.rate*m.rate},d=async()=>{n.value=null;try{const a=r.currencies.map(e=>({...e,rate:e.code==="USD"?1:e.rate*(.95+Math.random()*.1)}));c.saveData(u,a),r.setCurrencies(a)}catch{n.value="Failed to update currency rates"}},t=async a=>{n.value=null;try{c.saveData(l,a),r.setBaseCurrency(a)}catch(e){throw n.value="Failed to set base currency",e}};return{currencies:f(()=>r.currencies),baseCurrency:f(()=>r.baseCurrency),loading:s(!1),error:n,fetchCurrencies:i,convertCurrency:y,updateRates:d,setBaseCurrency:t}};export{E as u};
