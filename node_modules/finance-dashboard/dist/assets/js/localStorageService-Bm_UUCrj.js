const c=["categories","transactions","cards","goals"],l=r=>{try{const e=localStorage.getItem(r);return e?JSON.parse(e):null}catch(e){return console.error(`Error getting data from localStorage for key: ${r}`,e),null}},i=(r,e)=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(t){console.error(`Error saving data to localStorage for key: ${r}`,t)}},d=()=>{try{const r={};for(const a of c)r[a]=l(a)||[];const e=JSON.stringify(r,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`finance-dashboard-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(r){console.error("Error exporting data:",r),alert("Failed to export data. See console for details.")}},p=r=>new Promise((e,t)=>{const n=new FileReader;n.onload=o=>{try{const a=JSON.parse(o.target.result);if(!c.every(s=>a.hasOwnProperty(s)&&Array.isArray(a[s]))){t(new Error("Invalid or corrupted backup file."));return}for(const s of c)i(s,a[s]);e()}catch{t(new Error("Failed to parse backup file. Make sure it is a valid JSON file."))}},n.onerror=o=>{t(new Error("Failed to read the file."))},n.readAsText(r)}),f=()=>{for(const r of c)localStorage.removeItem(r)},u={getData:l,saveData:i,exportData:d,importData:p,resetData:f};export{u as l};
