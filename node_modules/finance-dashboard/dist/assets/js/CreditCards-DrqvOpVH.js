import{r as h,C as N,o as P,a as n,e as t,b as u,t as l,A as a,n as x,f as m,E as p,I as j,h as k,l as O,F as R,B as G,p as r}from"./vendor-kE9Pwckw.js";import{u as H}from"./useCards-BHytCPHY.js";import{f as v,a as J}from"./formatters-B8MMj10x.js";import{_ as K}from"./index-DLyBPiDK.js";import"./localStorageService-Bm_UUCrj.js";import"./utils-B9ygI19o.js";const Q={class:"credit-cards"},W={class:"header"},X={class:"summary-cards"},Y={class:"summary-card"},Z={class:"amount"},tt={class:"summary-card"},st={class:"amount"},et={class:"summary-card"},ot={class:"amount positive"},at={class:"summary-card"},lt={key:0,class:"card-form card"},it={class:"form-row"},nt={class:"form-group"},rt={class:"form-group"},dt={class:"form-row"},ut={class:"form-group"},ct={class:"form-group"},mt={class:"form-row"},pt={class:"form-group"},vt={class:"form-group"},bt={class:"form-group"},_t={class:"color-picker"},Ct={class:"form-actions"},yt=["disabled"],ft={key:1,class:"loading"},gt={key:2,class:"error"},Dt={class:"cards-grid"},ht={class:"card-header"},xt={class:"card-type"},kt={key:0,class:"card-logo visa"},wt={key:1,class:"card-logo mastercard"},Ft={key:2,class:"card-logo amex"},Mt={key:3,class:"card-logo discover"},St={class:"card-actions"},Vt=["onClick"],At=["onClick"],Ut={class:"card-number"},Tt={class:"card-footer"},$t={class:"card-info"},qt={class:"card-name"},zt={class:"card-due"},Et={class:"card-balance"},It={class:"card-details"},Bt={class:"detail-row"},Lt={class:"value"},Nt={class:"detail-row"},Pt={class:"value positive"},jt={class:"detail-row"},Ot={class:"detail-row"},Rt={class:"value"},Gt={key:3,class:"empty-state"},Ht={__name:"CreditCards",setup(Jt){const{cards:C,loading:_,error:y,fetchCards:w,addCard:F,updateCard:M,deleteCard:S,totalCreditLimit:V,totalBalance:A,availableCredit:U,utilizationRate:f}=H(),d=h(!1),c=h(null),g={name:"",type:"visa",lastFourDigits:"",limit:1e4,balance:0,dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0],color:"#1a237e"},o=N({...g});P(()=>{w()});const T=(i,s)=>{const e=parseInt(i.slice(1),16),b=Math.max(0,Math.min(255,(e>>16)+s)),B=Math.max(0,Math.min(255,(e>>8&255)+s)),L=Math.max(0,Math.min(255,(e&255)+s));return`#${((1<<24)+(b<<16)+(B<<8)+L).toString(16).slice(1)}`},$=async()=>{c.value?await M(c.value.id,{...o,number:`**** **** **** ${o.lastFourDigits}`}):await F(o),D(),d.value=!1,c.value=null},q=i=>{c.value=i,o.name=i.name,o.type=i.type,o.lastFourDigits=i.number.slice(-4),o.limit=i.limit,o.balance=i.balance,o.dueDate=i.dueDate,o.color=i.color,d.value=!0},z=()=>{c.value=null,D(),d.value=!1},D=()=>{Object.assign(o,g),o.dueDate=new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]},E=async i=>{confirm("Tem certeza que deseja excluir este cart√£o de cr√©dito?")&&await S(i)},I=i=>{const s=new Date,e=new Date(i),b=Math.ceil((e-s)/(1e3*60*60*24));return Math.max(0,b)};return(i,s)=>(r(),n("div",Q,[t("div",W,[s[9]||(s[9]=t("h1",null,"Cart√µes de Cr√©dito",-1)),t("button",{onClick:s[0]||(s[0]=e=>d.value=!d.value),class:"btn btn-primary"},l(d.value?"Cancelar":"+ Adicionar Cart√£o"),1)]),t("div",X,[t("div",Y,[s[10]||(s[10]=t("h3",null,"Limite de Cr√©dito Total",-1)),t("p",Z,l(a(v)(a(V))),1)]),t("div",tt,[s[11]||(s[11]=t("h3",null,"Saldo Total",-1)),t("p",st,l(a(v)(a(A))),1)]),t("div",et,[s[12]||(s[12]=t("h3",null,"Cr√©dito Dispon√≠vel",-1)),t("p",ot,l(a(v)(a(U))),1)]),t("div",at,[s[13]||(s[13]=t("h3",null,"Taxa de Utiliza√ß√£o",-1)),t("p",{class:x(["amount",a(f)>.3?"negative":"positive"])},l((a(f)*100).toFixed(1))+"% ",3)])]),d.value?(r(),n("div",lt,[t("h3",null,l(c.value?"Editar Cart√£o de Cr√©dito":"Adicionar Novo Cart√£o de Cr√©dito"),1),t("form",{onSubmit:O($,["prevent"])},[t("div",it,[t("div",nt,[s[14]||(s[14]=t("label",null,"Nome do Cart√£o",-1)),m(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.name=e),type:"text",required:"",class:"form-control",placeholder:"ex: Visa Platinum"},null,512),[[p,o.name]])]),t("div",rt,[s[16]||(s[16]=t("label",null,"Tipo de Cart√£o",-1)),m(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.type=e),class:"form-control",required:""},[...s[15]||(s[15]=[t("option",{value:"visa"},"Visa",-1),t("option",{value:"mastercard"},"MasterCard",-1),t("option",{value:"amex"},"American Express",-1),t("option",{value:"discover"},"Discover",-1)])],512),[[j,o.type]])])]),t("div",dt,[t("div",ut,[s[17]||(s[17]=t("label",null,"√öltimos 4 D√≠gitos",-1)),m(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>o.lastFourDigits=e),type:"text",maxlength:"4",required:"",class:"form-control",placeholder:"1234"},null,512),[[p,o.lastFourDigits]])]),t("div",ct,[s[18]||(s[18]=t("label",null,"Limite de Cr√©dito",-1)),m(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>o.limit=e),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"10000"},null,512),[[p,o.limit,void 0,{number:!0}]])])]),t("div",mt,[t("div",pt,[s[19]||(s[19]=t("label",null,"Saldo Atual",-1)),m(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>o.balance=e),type:"number",step:"0.01",required:"",class:"form-control",placeholder:"4500"},null,512),[[p,o.balance,void 0,{number:!0}]])]),t("div",vt,[s[20]||(s[20]=t("label",null,"Data de Vencimento",-1)),m(t("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>o.dueDate=e),type:"date",required:"",class:"form-control"},null,512),[[p,o.dueDate]])])]),t("div",bt,[s[21]||(s[21]=t("label",null,"Cor do Cart√£o",-1)),t("div",_t,[m(t("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>o.color=e),type:"color",class:"color-input"},null,512),[[p,o.color]]),t("span",{class:"color-preview",style:k({backgroundColor:o.color})},null,4),t("span",null,l(o.color),1)])]),t("div",Ct,[t("button",{type:"submit",disabled:a(_),class:"btn btn-primary"},l(a(_)?"Salvando...":c.value?"Atualizar Cart√£o":"Adicionar Cart√£o"),9,yt),c.value?(r(),n("button",{key:0,onClick:z,type:"button",class:"btn btn-secondary"}," Cancelar ")):u("",!0)])],32)])):u("",!0),a(_)&&!d.value?(r(),n("div",ft,"Carregando cart√µes de cr√©dito...")):u("",!0),a(y)?(r(),n("div",gt,l(a(y)),1)):u("",!0),t("div",Dt,[(r(!0),n(R,null,G(a(C),e=>(r(),n("div",{key:e.id,class:"credit-card-item"},[t("div",{class:"card-front",style:k({background:`linear-gradient(135deg, ${e.color}, ${T(e.color,-20)})`})},[t("div",ht,[t("div",xt,[e.type==="visa"?(r(),n("span",kt,"VISA")):u("",!0),e.type==="mastercard"?(r(),n("span",wt,"MasterCard")):u("",!0),e.type==="amex"?(r(),n("span",Ft,"Amex")):u("",!0),e.type==="discover"?(r(),n("span",Mt,"Discover")):u("",!0)]),t("div",St,[t("button",{onClick:b=>q(e),class:"btn-icon",title:"Editar"}," ‚úèÔ∏è ",8,Vt),t("button",{onClick:b=>E(e.id),class:"btn-icon",title:"Excluir"}," üóëÔ∏è ",8,At)])]),t("div",Ut,l(e.number),1),t("div",Tt,[t("div",$t,[t("div",qt,l(e.name),1),t("div",zt,"Vencimento: "+l(a(J)(e.dueDate)),1)]),t("div",Et,l(a(v)(e.balance)),1)])],4),t("div",It,[t("div",Bt,[s[22]||(s[22]=t("span",{class:"label"},"Limite de Cr√©dito:",-1)),t("span",Lt,l(a(v)(e.limit)),1)]),t("div",Nt,[s[23]||(s[23]=t("span",{class:"label"},"Dispon√≠vel:",-1)),t("span",Pt,l(a(v)(e.limit-e.balance)),1)]),t("div",jt,[s[24]||(s[24]=t("span",{class:"label"},"Utiliza√ß√£o:",-1)),t("span",{class:x(["value",e.balance/e.limit>.3?"negative":""])},l((e.balance/e.limit*100).toFixed(1))+"% ",3)]),t("div",Ot,[s[25]||(s[25]=t("span",{class:"label"},"Pr√≥ximo Pagamento:",-1)),t("span",Rt,l(I(e.dueDate))+" dias",1)])])]))),128))]),a(C).length===0&&!a(_)?(r(),n("div",Gt,[s[26]||(s[26]=t("div",{class:"empty-icon"},"üí≥",-1)),s[27]||(s[27]=t("h3",null,"Nenhum Cart√£o de Cr√©dito",-1)),s[28]||(s[28]=t("p",null,"Adicione seu primeiro cart√£o de cr√©dito para come√ßar",-1)),t("button",{onClick:s[8]||(s[8]=e=>d.value=!0),class:"btn btn-primary"}," Adicionar Primeiro Cart√£o ")])):u("",!0)]))}},ts=K(Ht,[["__scopeId","data-v-9524d612"]]);export{ts as default};
